<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Using the Maintenance Workflows :: DirX Documentation</title>
    <meta name="generator" content="Antora 3.1.9">
    <link rel="stylesheet" href="../../../_/css/site.css">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../../..">DirX Documentation</a>
      <button class="navbar-burger" aria-controls="topbar-nav" aria-expanded="false" aria-label="Toggle main menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Products</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Product A</a>
            <a class="navbar-item" href="#">Product B</a>
            <a class="navbar-item" href="#">Product C</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Services</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Service A</a>
            <a class="navbar-item" href="#">Service B</a>
            <a class="navbar-item" href="#">Service C</a>
          </div>
        </div>
        <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div>
      </div>
    </div>
  </nav>
</header>
<div class="body">
<div class="nav-container" data-component="dirx-identity-docs" data-version="9.0.0">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <button class="nav-menu-toggle" aria-label="Toggle expand/collapse all" style="display: none"></button>
    <h3 class="title"><a href="../index.html">DirX Identity</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Documentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../index.html">Overview</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="appl-dev-guide.html">Application Development Guide</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch1_applsref.html#understanding_the_default_application_workflow_technology">Understanding the Default Application Workflow Technology</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch1_applsref.html#understanding_request_workflows">Understanding Request Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch1_applsref.html#understanding_java_based_workflows">Understanding Java-based Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch1_applsref.html#understanding_tcl_based_workflows">Understanding Tcl-based Workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch2_reqWFs.html#using_request_workflows">Using Request Workflows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_creation_workflows">Understanding Creation Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_modification_workflows">Understanding Modification Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_assignment_workflows">Understanding Assignment Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_deletion_workflows">Understanding Deletion Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_certification_workflows">Understanding Certification Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch2_reqWFs.html#understanding_service_management_workflows">Understanding Service Management Workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch3_configScen.html#configuring_custom_scenarios">Configuring Custom Scenarios</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch3_configScen.html#creating_the_new_scenario">Creating the New Scenario</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch3_configScen.html#refining_the_scenario">Refining the Scenario</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch3_configScen.html#creating_the_identity_creation_workflows">Creating the Identity Creation Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch3_configScen.html#creating_cluster_target_systems">Creating Cluster Target Systems</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch4_defappls.html#using_default_connectivity_application">Using the Default Connectivity Applications</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch4_defappls.html#working_with_default_connectivity_application_objects">Working with Default Connectivity Application Objects</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch4_defappls.html#working_with_default_connectivity_scenario">Working with the Default Connectivity Scenario</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch5_sourceWFs.html#using_the_source_workflows">Using the Source Workflows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch5_sourceWFs.html#understanding_the_java_based_source_workflows">Understanding the Java-based Source Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch5_sourceWFs.html#understanding-the-tcl-based-source-workflows">Understanding the Tcl-based Source Workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="#using_the_maintenance_workflows">Using the Maintenance Workflows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#understanding_java_based_maintenance_workflows">Understanding the Java-based Maintenance Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="#understanding_tcl_based_maintenance_workflows">Understanding the Tcl-based Maintenance Workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="ch7_targetWFs.html#using_the_target_system_provisioning_workflows">Using the Target System (Provisioning) Workflows</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch7_targetWFs.html#understanding_java_based_target_system_workflows">Understanding Java-based Target System Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="ch7_targetWFs.html#understanding_tcl_based_target_system_workflows">Understanding Tcl-based Target System Workflows</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="appa_depr.html#deprecated_features">Deprecated Features</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#ads_provisioning_workflows">ADS Provisioning Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#dashboard_workflow">Dashboard Workflow</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#dirx_access_workflows">DirX Access Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#jdbc_provisioning_workflows">JDBC Provisioning Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#ldap_provisioning_workflows">LDAP Provisioning Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#ldap_xxl_provisioning_workflows">LDAP XXL Provisioning Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#lotus_notes_provisioning_workflows">Lotus Notes Provisioning Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#unix_pam_provisioning_workflows">UNIX PAM Provisioning Workflows</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="appa_depr.html#unix_pam_workflows">UNIX PAM Workflows</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">DirX Identity</span>
    <span class="version">9.0.0</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <div class="title"><a href="../index.html">DirX Identity</a></div>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="../index.html">9.0.0</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">DirX Identity</a></li>
    <li><a href="appl-dev-guide.html">Application Development Guide</a></li>
    <li><a href="#using_the_maintenance_workflows">Using the Maintenance Workflows</a></li>
  </ul>
</nav>
</div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Using the Maintenance Workflows</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>DirX Identity maintenance workflows help to maintain your identity system to ensure consistent and current data of high quality. This chapter provides detailed information about maintenance workflow configuration, special features and user hooks. The sections in this chapter include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Understanding the Java-based Maintenance Workflows - describes configuration, features, and user hooks for Java-based maintenance workflows.</p>
</li>
<li>
<p>Understanding the Tcl-based Maintenance Workflows - describes configuration, features, and user hooks for Tcl-based maintenance workflows.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For information about these workflows' theory of operation, see the <em>DirX Identity Connectivity Administration Guide</em> and the <em>DirX Identity Provisioning Administration Guide.</em></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding_java_based_maintenance_workflows"><a class="anchor" href="#understanding_java_based_maintenance_workflows"></a>Understanding the Java-based Maintenance Workflows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Maintenance workflows provided with the Identity Store default Connectivity scenario include workflows that run as threads in the Java-based server (IdS-J). They can run as the result of events and in many cases can be scheduled. The Java-based maintenance workflows include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Entry change workflows</strong> - special workflows for each type of entry (user, organization, and so on) that apply provisioning and / or consistency rules, check for broken links or update associated entries (for example, the user, if an organizational unit changed the privilege). Deploying these workflows allows you to minimize how often the Privilege Resolution or the Consistency Rule workflow runs (see the section <strong>"Privilege Resolution Workflow"</strong> for details).</p>
</li>
<li>
<p>Process Tickets Internal - a workflow that processes DirX Identity&#8217;s internal tickets.</p>
</li>
<li>
<p><strong>Account Password Manager</strong> - a workflow that changes account passwords generated by user requests (event-based mode). Alternatively, it can run scheduled on a specific number of account objects and creates new passwords for accounts whose passwords have expired.</p>
</li>
<li>
<p><strong>Reset Account Passwords</strong> - a workflow that resets passwords of either functional or personal accounts. It runs scheduled on a specific number of account objects.</p>
</li>
<li>
<p><strong>Reset Password If Displayed</strong> - a workflow that resets passwords of privileged accounts (for example, within 24 hours) after the password has been read by Web Center. It runs scheduled on a specific set of privileged account objects (defined by an LDAP filter).</p>
</li>
<li>
<p><strong>User Password Event Manager</strong> - a workflow that changes user passwords and all related account passwords based on user requests (event-based mode).</p>
</li>
<li>
<p><strong>User Password Expiration Notification</strong> - a workflow that finds users whose passwords are about to expire and informs the users about it by sending a notification mail.</p>
</li>
<li>
<p>Transport Workflows - a workflow that transfers data between Identity Store instances.</p>
</li>
<li>
<p>Joint Backup - a workflow that performs a synchronized backup of the Java-based Server’s repository and the LDAP Connectivity and Provisioning data store.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_entry_change_workflows"><a class="anchor" href="#_entry_change_workflows"></a>Entry Change Workflows</h3>
<div class="paragraph">
<p>Workflows for normal entry changes (not password changes) exist for various types of entries: users, organizations, organizational units and contexts. They are invoked by the same mechanism and their processing is very similar. The following figure illustrates how these workflows are invoked:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image1.png" alt="Invoking an Entry Maintenance Workflow">
</div>
<div class="title">Figure 1. Invoking an Entry Maintenance Workflow</div>
</div>
<div class="paragraph">
<p>Various clients that create, update or delete entries in the Identity domain publish events after their changes. This action is controlled by the <strong>Event Policy</strong> in the domain. The event is only sent if the corresponding object type is activated in the event policy. Clients that send these types of events are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Web Center and Identity Manager.</p>
</li>
<li>
<p>Provisioning Web Services.</p>
</li>
<li>
<p>Import workflows, both Tcl-based and Java-based workflows. Note that</p>
</li>
<li>
<p>For Tcl-based workflows, <strong>metacp</strong> must be configured accordingly.</p>
</li>
<li>
<p>For Java-based workflows, the audit object type in the channel that configures the mapping for import into DirX Identity domain must be set.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It does not make sense to start these workflows by hand or on a schedule because they only evaluate events. As with other real-time workflows, they are deployed to the IdS-J server if their <strong>Is Active</strong> flags are set in the configuration.</p>
</div>
<div class="paragraph">
<p>The clients send an event after an entry has been updated successfully. The topic of the event contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The object description name of the changed object: for example, dxrUser, ctxOrganizationalUnit.</p>
</li>
<li>
<p>The host name of the LDAP server. The clients use the host name as it is configured in their binding configuration.</p>
</li>
<li>
<p>The root DN of the DirX Identity domain (for example "cn=My-Company").</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>There is one deviation from these rules: the Java-based workflows that import accounts and groups use the cluster and domain attribute of the target system rather than the host name and the domain root of the LDAP server.</p>
</div>
<div class="paragraph">
<p>Make sure that the <strong>When Applicable</strong> section of the workflows contains the proper information.</p>
</div>
<div class="paragraph">
<p>The actions of the workflows depend on the entry type, the event type (add, modify or delete) and on the changed attributes. But typically they:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Apply provisioning and / or consistency rules whose filters match the entry attributes.</p>
</li>
<li>
<p>Check for broken links from the entries and especially for links to such an entry, if it has been deleted.</p>
</li>
<li>
<p>Update associated users, if a critical attribute has changed. This is particularly important if a privilege link of a business object has been added or deleted.</p>
</li>
<li>
<p>Call a user hook, if one has been configured.</p>
</li>
<li>
<p>Store the changes for the entry made during this workflow&#8217;s operation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Deploying these workflows allows you to avoid having to start a privilege resolution or consistency check workflow on a regular basis (see the section "<strong>Privilege Resolution Workflow"</strong>). The resulting privilege changes and account updates are performed in real time.</p>
</div>
<div class="paragraph">
<p>For more details on the configuration and processing of these workflows, see the following sections.</p>
</div>
<div class="sect3">
<h4 id="_accounts"><a class="anchor" href="#_accounts"></a>Accounts</h4>
<div class="paragraph">
<p>The following sections describe how to configure the event-based maintenance workflow for accounts and the tasks this workflow performs.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_maintenance_workflow_for_accounts"><a class="anchor" href="#_configuring_the_event_based_maintenance_workflow_for_accounts"></a>Configuring the Event-based Maintenance Workflow for Accounts</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter an appropriate resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>The join engine type <strong>AccountEventController</strong> should be selected. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain</em>-<strong>S</strong><em>n</em>/<strong>confdb/jobs/eventBasedRules/lib</strong></p>
</div>
<div class="paragraph">
<p>For information on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="paragraph">
<p><strong>Event Attributes</strong> tab:</p>
</div>
<div class="paragraph">
<p><strong>Attributes for finding Users</strong> determines a sequence of attribute names that are used for finding the associated user of given account. Each line contains a comma-separated list of attribute names. The event controller searches for users where the values of these attributes match those of the account. If it finds exactly one, it associates the account with the user; that is, it sets the account&#8217;s user link. If it finds none or more than one user, it continues with the next list of attributes.</p>
</div>
<div class="paragraph">
<p><strong>Sort Key</strong> defines the sort attribute for sorting rules. The default value is “cn”</p>
</div>
<div class="paragraph">
<p><strong>Sort Ascending</strong> defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Adjust the <strong>Is applicable for</strong> parameters. In particular, make sure <strong>type</strong> is set to the object description name <strong>SvcTSAccount</strong> and the resource and cluster are set to the server and domain name respectively.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_maintenance_workflow_operation_for_accounts"><a class="anchor" href="#_event_based_maintenance_workflow_operation_for_accounts"></a>Event-based Maintenance Workflow Operation for Accounts</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based maintenance workflow operates for accounts:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image2.png" alt="Event-based Maintenance Workflow Operation: Accounts">
</div>
<div class="title">Figure 2. Event-based Maintenance Workflow Operation: Accounts</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>It applies the accept and cleanup rules. If one of the account&#8217;s group memberships is in the IMPORTED state and the account and the group match an accept or cleanup rule, the workflow changes the state to IGNORE or DELETED respectively. Note that this action occurs only if the memberships are stored at the account.</p>
</li>
<li>
<p>It applies the validation rules. If the account matches a validation rule&#8217;s account filter, it becomes an imported member of the respective group(s). If the account does not match the filter, but is an imported member of a matching group for no other reason, it is deleted: the membership state is changed to DELETED. This action triggers a real-time provisioning workflow and updates the state at the connected system.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>If the entry was modified, the workflow saves it to the LDAP server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_organizations"><a class="anchor" href="#_organizations"></a>Organizations</h4>
<div class="paragraph">
<p>This section describes how to configure the event-based maintenance workflow for organizations and the tasks this workflow performs.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_maintenance_workflow_for_organizations"><a class="anchor" href="#_configuring_the_event_based_maintenance_workflow_for_organizations"></a>Configuring the Event-based Maintenance Workflow for Organizations</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter a proper resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>Select the join engine type <strong>OrganizationEventController</strong>. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain-</em><strong>S</strong><em>n</em>/<strong>confdb/jobs/eventBasedRules/lib</strong></p>
</div>
<div class="paragraph">
<p>For details on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="paragraph">
<p><strong>Event Attributes</strong> tab:</p>
</div>
<div class="paragraph">
<p><strong>Attributes to update Users</strong> determines the list of attributes that result in the update of all associated users when one of them has been changed.</p>
</div>
<div class="paragraph">
<p><strong>Sort Key</strong> defines the sort attribute for sorting rules. The default value is “cn”</p>
</div>
<div class="paragraph">
<p><strong>Sort Ascending</strong> defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Adjust the <strong>Is applicable for</strong> parameters. Make sure <strong>type</strong> is set to the object description name <strong>ctxOrganization</strong> and the resource and cluster are set to the server and domain name respectively.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_maintenance_workflow_operation_for_organizations"><a class="anchor" href="#_event_based_maintenance_workflow_operation_for_organizations"></a>Event-based Maintenance Workflow Operation for Organizations</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based maintenance workflow operates for organizations:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image3.png" alt="Event-based Maintenance Workflow Operation: Organizations">
</div>
<div class="title">Figure 3. Event-based Maintenance Workflow Operation: Organizations</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>If the privilege link or one of the configured attributes has been changed, it updates all associated users. (Users are associated if they have a reference (dxrOrganizationLink or dxrSecOrganizationLink) to this entry.) The update contains the resolution of the user privileges and includes those privileges referenced from the organization.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>If the entry was modified, the workflow saves it to the LDAP server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_organizational_units"><a class="anchor" href="#_organizational_units"></a>Organizational Units</h4>
<div class="paragraph">
<p>The following sections describe how to configure the event-based maintenance workflow for organizational units and describe the tasks this workflow performs.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_maintenance_workflow_for_organizational_units"><a class="anchor" href="#_configuring_the_event_based_maintenance_workflow_for_organizational_units"></a>Configuring the Event-based Maintenance Workflow for Organizational Units</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter a proper resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>Select the join engine type <strong>OUEventController</strong>. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain-</em><strong>S</strong><em>n</em>/<strong>confdb/jobs/eventBasedRules/lib</strong></p>
</div>
<div class="paragraph">
<p>For information on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="paragraph">
<p><strong>Event Attributes</strong> tab:</p>
</div>
<div class="paragraph">
<p><strong>Attributes to update Users</strong> determines the list of attributes that result in the update of all associated users when one of them has been changed.</p>
</div>
<div class="paragraph">
<p><strong>Sort Key</strong> defines the sort attribute for sorting rules. The default value is “cn”</p>
</div>
<div class="paragraph">
<p><strong>Sort Ascending</strong> defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Adjust the <strong>Is applicable for</strong> parameters. In particular, make sure <strong>type</strong> is set to the object description name <strong>ctxOrganizationalUnit</strong> and the resource and cluster are set to the server and domain name respectively.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_maintenance_workflow_operation_for_organizational_units"><a class="anchor" href="#_event_based_maintenance_workflow_operation_for_organizational_units"></a>Event-based Maintenance Workflow Operation for Organizational Units</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based maintenance workflow operates for organizational units:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image4.png" alt="Event-based Maintenance Workflow Operation: Organizational Units">
</div>
<div class="title">Figure 4. Event-based Maintenance Workflow Operation: Organizational Units</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>If the privilege link or one of the configured attributes has changed, the workflow updates all associated users. Users are associated with an entry if they have a reference (dxrOrganizationalUnitLink or dxrSecOrganizationalUnitLink) to it. The update contains the resolution of the user privileges and includes those privileges referenced from the organizational unit.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>If the entry was modified, the workflow saves it to the LDAP server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_context_objects"><a class="anchor" href="#_context_objects"></a>Context Objects</h4>
<div class="paragraph">
<p>The following sections describe how to configure the event-based maintenance workflow for context objects and describe the tasks this workflow performs.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_maintenance_workflow_for_context_objects"><a class="anchor" href="#_configuring_the_event_based_maintenance_workflow_for_context_objects"></a>Configuring the Event-based Maintenance Workflow for Context Objects</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter a proper resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>The join engine type <strong>ContextEventController</strong> should be selected. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain-</em><strong>S</strong><em>n</em>/<strong>confdb/jobs/eventBasedRules/lib</strong></p>
</div>
<div class="paragraph">
<p>For information on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="paragraph">
<p><strong>Event Attributes</strong> tab:</p>
</div>
<div class="paragraph">
<p><strong>Attributes to update Users</strong> determines the list of attributes that result in the update of all associated users when one of them has been changed.</p>
</div>
<div class="paragraph">
<p><strong>Sort Key</strong> defines the sort attribute for sorting rules. The default value is “cn”</p>
</div>
<div class="paragraph">
<p><strong>Sort Ascending</strong> defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Adjust the <strong>Is applicable for</strong> parameters. In particular, make sure <strong>type</strong> is set to the object description name <strong>dxrContext</strong> and the resource and cluster are set to the server and domain name respectively.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_maintenance_workflow_operation_for_context_objects"><a class="anchor" href="#_event_based_maintenance_workflow_operation_for_context_objects"></a>Event-based Maintenance Workflow Operation for Context Objects</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based maintenance workflow operates for context objects:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image5.png" alt="Event-based Maintenance Workflow Operation: Context Objects">
</div>
<div class="title">Figure 5. Event-based Maintenance Workflow Operation: Context Objects</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>If the privilege link or one of the configured attributes has changed, it updates all associated users. Users are associated if they have a reference (<strong>dxrContextLink</strong>) to this entry: the reference can be contained in the attributes <strong>dxrContextLink</strong> (standard) and in <strong>dxrExtensionLink1</strong>, &#8230;&#8203;, <strong>dxrExtensionLink10</strong>. The update contains resolution of the user privileges and includes those privileges referenced from the context.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The dxrExtensionLink attributes are not indexed per default. If you intend to use these links, set the corresponding directory indexes.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>If the entry was modified, the workflow saves it to the directory server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_location_objects"><a class="anchor" href="#_location_objects"></a>Location Objects</h4>
<div class="paragraph">
<p>The following sections describe how to configure the event-based maintenance workflow for location objects and describe the tasks this workflow performs.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_maintenance_workflow_for_location_objects"><a class="anchor" href="#_configuring_the_event_based_maintenance_workflow_for_location_objects"></a>Configuring the Event-based Maintenance Workflow for Location Objects</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter a proper resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>Select the join engine type <strong>LocationEventController</strong>. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain-</em><strong>S</strong><em>n</em>/<strong>confdb/jobs/eventBasedRules/lib</strong></p>
</div>
<div class="paragraph">
<p>For information on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="paragraph">
<p><strong>Event Attributes</strong> tab:</p>
</div>
<div class="paragraph">
<p><strong>Attributes to update Users</strong> determines the list of attributes that result in the update of all associated users when one of them has been changed.</p>
</div>
<div class="paragraph">
<p><strong>Sort Key</strong> defines the sort attribute for sorting rules. The default value is “cn”</p>
</div>
<div class="paragraph">
<p><strong>Sort Ascending</strong> defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Adjust the <strong>Is applicable for</strong> parameters. In particular, make sure <strong>type</strong> is set to the object description name <strong>ctxLocation</strong> and the resource and cluster are set to the server and domain name respectively.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_maintenance_workflow_operation_for_location_objects"><a class="anchor" href="#_event_based_maintenance_workflow_operation_for_location_objects"></a>Event-based Maintenance Workflow Operation for Location Objects</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based maintenance workflow operates for location objects:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image6.png" alt="Event-based Maintenance Workflow Operation: Locations">
</div>
<div class="title">Figure 6. Event-based Maintenance Workflow Operation: Locations</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>If the privilege link or one of the configured attributes has changed, it updates all associated users. Users are associated if they have a reference (dxrLocationLink or dxrSecLocationLink) to this entry. The update contains the resolution of the user privileges and includes those privileges referenced from the location.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>If the entry was modified, the workflow saves it to the LDAP server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cost_unit_objects"><a class="anchor" href="#_cost_unit_objects"></a>Cost Unit Objects</h4>
<div class="paragraph">
<p>The following sections describe how to configure the event-based maintenance workflow for cost unit objects and describe the tasks this workflow performs.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_maintenance_workflow_for_cost_unit_objects"><a class="anchor" href="#_configuring_the_event_based_maintenance_workflow_for_cost_unit_objects"></a>Configuring the Event-based Maintenance Workflow for Cost Unit Objects</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter a proper resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>Select the join engine type <strong>CostUnitEventController</strong>. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain</em>-<strong>S</strong><em>n</em>/<strong>confdb/jobs/eventBasedRules/lib</strong></p>
</div>
<div class="paragraph">
<p>For information on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="paragraph">
<p><strong>Event Attributes</strong> tab:</p>
</div>
<div class="paragraph">
<p><strong>Attributes to update Users</strong> determines the list of attributes that result in the update of all associated users when one of them has been changed.</p>
</div>
<div class="paragraph">
<p><strong>Sort Key</strong> defines the sort attribute for sorting rules. The default value is “cn”</p>
</div>
<div class="paragraph">
<p><strong>Sort Ascending</strong> defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Adjust the <strong>Is applicable for</strong> parameters. In particular, make sure <strong>type</strong> is set to the object description name <strong>dxrCostUnit</strong> and the resource and cluster are set to the server and domain name respectively.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_maintenance_workflow_operation_for_cost_unit_objects"><a class="anchor" href="#_event_based_maintenance_workflow_operation_for_cost_unit_objects"></a>Event-based Maintenance Workflow Operation for Cost Unit Objects</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based maintenance workflow operates for location objects:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image7.png" alt="Event-based Maintenance Workflow Operation: Cost Units">
</div>
<div class="title">Figure 7. Event-based Maintenance Workflow Operation: Cost Units</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>If the privilege link or one of the configured attributes has changed, it updates all associated users. Users are associated if they have a reference (<strong>dxrCostUnitLink</strong> or <strong>dxrSecCostUnitLink</strong>) to this entry. The update contains the resolution of the user privileges and includes those privileges referenced from the location.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>If the entry was modified, the workflow saves it to the LDAP server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_project_objects"><a class="anchor" href="#_project_objects"></a>Project Objects</h4>
<div class="paragraph">
<p>The following sections describe how to configure the event-based maintenance workflow for project objects and describe the tasks this workflow performs.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_maintenance_workflow_for_project_objects"><a class="anchor" href="#_configuring_the_event_based_maintenance_workflow_for_project_objects"></a>Configuring the Event-based Maintenance Workflow for Project Objects</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter a proper resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>Select the join engine type <strong>ProjectEventController</strong>. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain-</em><strong>S</strong><em>n</em>/<strong>confdb/jobs/eventBasedRules/lib</strong></p>
</div>
<div class="paragraph">
<p>For information on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="paragraph">
<p><strong>Event Attributes</strong> tab:</p>
</div>
<div class="paragraph">
<p><strong>Attributes to update Users</strong> determines the list of attributes that result in the update of all associated users when one of them has been changed.</p>
</div>
<div class="paragraph">
<p><strong>Sort Key</strong>: defines the sort attribute for sorting rules. The default value is “cn”</p>
</div>
<div class="paragraph">
<p><strong>Sort Ascending</strong>: defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Adjust the <strong>Is applicable for</strong> parameters. In particular, make sure <strong>type</strong> is set to the object description name <strong>dxrProject</strong> and the resource and cluster are set to the server and domain name respectively.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_maintenance_workflow_operation_for_projects"><a class="anchor" href="#_event_based_maintenance_workflow_operation_for_projects"></a>Event-based Maintenance Workflow Operation for Projects</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based maintenance workflow operates for project objects:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image8.png" alt="Event-based Maintenance Workflow Operation: Projects">
</div>
<div class="title">Figure 8. Event-based Maintenance Workflow Operation: Projects</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>If the privilege link or one of the configured attributes has changed, it updates all associated users. Users are associated if they have a reference (<strong>dxrProjectLink</strong>) to this entry. The update contains the resolution of the user privileges and includes those privileges referenced from the project.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>If the entry was modified, the workflow saves it to the LDAP server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_users"><a class="anchor" href="#_users"></a>Users</h4>
<div class="paragraph">
<p>The event-based maintenance workflow for users accepts user change events, applies provisioning and consistency rules, resolves the users as far as necessary and updates the account attributes. Deploying this workflow allows you to avoid having to start a privilege resolution workflow on a regular basis (see the section "Privilege Resolution Workflow"). The resulting privilege changes and account updates are performed in real time. If no relevant attributes are changed, users are not resolved and accounts are not updated; this procedure may save a lot of time. You only need privilege resolution if you change the role hierarchy or group attributes and defer the resolution of affected users. The resolution or propagation process in the previous step can start additional provisioning processes to connected systems.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_event_based_user_resolution_workflow"><a class="anchor" href="#_configuring_the_event_based_user_resolution_workflow"></a>Configuring the Event-based User Resolution Workflow</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then select the <strong>Event Attributes</strong> tab. Adjust the following configuration items, which determine when accounts are to be updated:</p>
</li>
<li>
<p><strong>Attributes to include:</strong> defines all attributes that should be processed.</p>
</li>
<li>
<p><strong>Attributes to ignore:</strong> defines all attributes that should be ignored, if they are not in the previous set</p>
</li>
<li>
<p><strong>Attribute prefixes to include:</strong> defines the prefixes to use to update attributes; all attributes starting with these prefixes result in account update if they are not in the "ignore" list.</p>
</li>
<li>
<p><strong>Attribute prefixes to ignore:</strong> defines the prefixes to use to ignore attributes; if the attributes are not in any of the previous lists, but match one of these prefixes, they are ignored.</p>
</li>
<li>
<p><strong>Searchbase for Consistency Rules</strong>: defines the top level folder of the consistency rules that the workflow performs.</p>
</li>
<li>
<p><strong>Searchbase for Provisioning Rules</strong>: defines the top level folder of the provisioning rules that the workflow performs. Note that the rules must contain all grant- and deny rules for a given privilege, because they are executed in one common algorithm.</p>
</li>
<li>
<p><strong>Sort Key</strong> defines the sort attribute for sorting rules. The default value is “cn”</p>
</li>
<li>
<p><strong>Sort Ascending</strong> defines the sort order ascending. The default value is “true” so sorting is ascending.</p>
</li>
<li>
<p>In the <strong>General</strong> tab of the workflow, set the <strong>Active</strong> flag.</p>
</li>
<li>
<p>Right-click the workflow object and then select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_event_based_user_resolution_workflow_operation"><a class="anchor" href="#_event_based_user_resolution_workflow_operation"></a>Event-based User Resolution Workflow Operation</h5>
<div class="paragraph">
<p>The following figure illustrates how the event-based user resolution workflow operates:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image9.png" alt="Event-based User Resolution Workflow Operation">
</div>
<div class="title">Figure 9. Event-based User Resolution Workflow Operation</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations for an add or modify event:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It checks the links from this entry to other entries. If a referenced entry cannot be found, the workflow removes the reference.</p>
</li>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook should not store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
<li>
<p>The workflow applies the matching provisioning rules, assigns new privileges or removes existing privilege assignments based on the new attribute values and at the end resolves the user, if either in the received event or after applying rules and user hook</p>
<div class="ulist">
<ul>
<li>
<p>at least one of the changed attributes is among the domain&#8217;s permission parameters,</p>
</li>
<li>
<p>is a state attribute,</p>
</li>
<li>
<p>a date,</p>
</li>
<li>
<p>a privilege link</p>
</li>
<li>
<p>or the attribute dxrTBA is enabled.</p>
</li>
</ul>
</div>
</li>
<li>
<p>If the user was modified, the workflow stores it to the LDAP server.</p>
</li>
<li>
<p>If one of the attributes has changed that are configured as to be included in the <strong>Event Attributes</strong> tab of the activity, the attributes of the user&#8217;s accounts are updated. This step applies particularly to attributes that are mastered by the user. The user is not resolved.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The rules on when to update accounts are as follows: accounts are updated if at least one of the changed attributes</p>
</div>
<div class="ulist">
<ul>
<li>
<p>is among the configured "include" parameters;</p>
</li>
<li>
<p>matches an "include prefix", but is not among the "ignore" parameters;</p>
</li>
<li>
<p>doesn&#8217;t match any of the "ignore" and "ignore prefix" parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a delete event is received, the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Removes links from associated entries to the deleted entry</p>
</li>
<li>
<p>Calls the user hook.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_personas"><a class="anchor" href="#_personas"></a>Personas</h4>
<div class="paragraph">
<p>The event-based maintenance workflow for personas accepts persona change events, applies provisioning and consistency rules, resolves the personas as far as necessary and updates the account attributes.</p>
</div>
<div class="paragraph">
<p>Since personas are just another representation of users, the PersonaResolverController uses the same implementation as the UserResolverController. The PersonaResolverController uses an additional configuration field <strong>Link Attribute for Owner</strong> in the join activity’s <strong>Event Attributes</strong> tab. It uses this attribute (owner) to check if attributes that are mastered from the owner are part of the event’s modifications. In this case, the persona is saved to update this set of attributes.</p>
</div>
<div class="paragraph">
<p>The use of different workflows for users, personas and functional users enables the use of different folders for consistency rules and provisioning rules for the three user representations.</p>
</div>
<div class="paragraph">
<p>All other aspects of event-based maintenance workflow for personas are common to the event-based maintenance workflow for users, as described in the section "Users".</p>
</div>
</div>
<div class="sect3">
<h4 id="_functional_users"><a class="anchor" href="#_functional_users"></a>Functional Users</h4>
<div class="paragraph">
<p>The event-based maintenance workflow for functional users accepts functional user change events, applies provisioning and consistency rules, resolves the functional users as far as necessary and updates the account attributes.</p>
</div>
<div class="paragraph">
<p>Since functional users are just another representation of users, the FunctionalUserResolverController uses the same implementation as the UserResolverController. The FunctionalUserResolverController uses an additional configuration field <strong>Link Attribute for Sponsor</strong> in the join activity’s <strong>Event Attributes</strong> tab. It uses this attribute (dxrSponsor) to check if attributes that are mastered from the sponsor are part of the event’s modifications. In this case, the functional user is saved to update this set of attributes.</p>
</div>
<div class="paragraph">
<p>The use of different workflows for users, personas and functional users enables the use of different folders for consistency rules and provisioning rules for the three user representations.</p>
</div>
<div class="paragraph">
<p>All other aspects of event-based maintenance workflow for functional users are common to the event-based maintenance workflow for users as described in the section "Users".</p>
</div>
</div>
<div class="sect3">
<h4 id="_generic_objects"><a class="anchor" href="#_generic_objects"></a>Generic Objects</h4>
<div class="paragraph">
<p>The following sections describe how to configure a generic event-based maintenance workflow for any object type and describe the tasks this workflow performs. Typical use of this workflow is to run consistency rules after an object is created or modified.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_generic_event_based_processing_workflow"><a class="anchor" href="#_configuring_the_generic_event_based_processing_workflow"></a>Configuring the Generic Event-based Processing Workflow</h5>
<div class="paragraph">
<p>Configuration is possible for any type of object. Use the object description name to define the applicability of the workflow.</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>You want to run consistency rules whenever a role is created or modified.</p>
</div>
<div class="paragraph">
<p>Then you must perform the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Login into the Provisioning view group of the DirX Identity Manager.</p>
</li>
<li>
<p>Configure or extend the event policy: add <strong>dxrRole</strong> to the Selected area in the <strong>Configuration</strong> tab.<br>
Note that dxrRole is the standard name of the role object description. If you use several different types of object descriptions, use the appropriate object description name here.</p>
</li>
<li>
<p>Create a folder for the consistency rules to be run with this workflow. Create the consistency rules in this folder.</p>
</li>
<li>
<p>Create a new event-based processing workflow:</p>
</li>
<li>
<p>Log in into the <strong>Connectivity</strong> view group of the DirX Identity Manager.</p>
</li>
<li>
<p>Click <strong>Global View</strong> and then select the scenario where you want to create the workflow.</p>
</li>
<li>
<p>Click the line between the two <strong>Identity Stores</strong> and select <strong>New</strong> from the context menu.</p>
</li>
<li>
<p>Select the <strong>GenericEventBasedProcessing</strong> template and click <strong>Next</strong>.</p>
</li>
<li>
<p>In the <strong>General Workflow Info</strong> tab define a name and a description, set the active flag.</p>
</li>
<li>
<p>In the <strong>Is applicable</strong> section configure <strong>dxrRole</strong> as <strong>Type</strong>. As above, use here the object description name that defines your object. Set the Cluster field to '*'.</p>
</li>
<li>
<p>In the <strong>Event parameters</strong> tab set the path to the folder with your previously created consistency rules (<strong>Searchbase for Consistency Rules</strong>).</p>
</li>
<li>
<p>Click <strong>Next</strong> and then <strong>Finish</strong>.</p>
</li>
<li>
<p>Perform <strong>Load IdS-J Configuration</strong> to load the newly created workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="paragraph">
<p>Now your workflow is ready to be tested.</p>
</div>
</div>
<div class="sect4">
<h5 id="_generic_event_based_processing_workflow_operation"><a class="anchor" href="#_generic_event_based_processing_workflow_operation"></a>Generic Event-based Processing Workflow Operation</h5>
<div class="paragraph">
<p>The following figure illustrates how the generic event-based processing workflow operates:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image10.png" alt="Generic Event-based Processing Workflow Operation">
</div>
<div class="title">Figure 10. Generic Event-based Processing Workflow Operation</div>
</div>
<div class="paragraph">
<p>The workflow performs the following operations for an add or modify event:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It applies the consistency rules whose filters match the entry&#8217;s attributes.</p>
</li>
<li>
<p>It calls the user hook, if one is configured. The user hook has access to the affected entry and can change it. The user hook does not need to store its changes to the LDAP server because the workflow performs this task in the next step.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If a delete event is received, the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Calls the user hook.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_process_tickets_internal_workflow"><a class="anchor" href="#_process_tickets_internal_workflow"></a>Process Tickets Internal Workflow</h3>
<div class="paragraph">
<p>The Process Tickets Internal workflow runs regularly and processes all tickets where the condition for processing is fulfilled. The figure shows the architecture.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image11.png" alt="Process Tickets Internal Workflow">
</div>
<div class="title">Figure 11. Process Tickets Internal Workflow</div>
</div>
<div class="paragraph">
<p>The Process Tickets Internal workflow runs typically scheduled and performs these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It reads all tickets that are to process.</p>
</li>
<li>
<p>It processes the tickets.</p>
</li>
<li>
<p>Processing of a ticket might trigger other processes, for example a privilege resolution on a user object. In this case other objects might be created and messages for further processing might be initiated (for example provisioning requests).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a detailed definition of the procedure see the "Process Tickets Internal Workflow Operation" chapter.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_process_tickets_internal_workflow"><a class="anchor" href="#_configuring_the_process_tickets_internal_workflow"></a>Configuring the Process Tickets Internal Workflow</h4>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select your scenario (if not yet present, use the target system wizard from the Provisioning view group to create the scenario).</p>
</li>
<li>
<p>Click the workflow line between the Identity Stores and select <strong>New</strong> from the context menu.</p>
</li>
<li>
<p>Select the <strong>ProcessTicketsInternal</strong> workflow template and then click <strong>Next</strong>.</p>
</li>
<li>
<p>Define the <strong>Name</strong> and <strong>Description</strong> fields and set the <strong>Is</strong> <strong>Active</strong> flag.</p>
</li>
<li>
<p>Click <strong>Next</strong> and then <strong>Finish</strong> to complete the copy operation.</p>
</li>
<li>
<p>Perform <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can run the workflow either by hand or regularly triggered by a schedule.</p>
</div>
</div>
<div class="sect3">
<h4 id="_process_tickets_internal_workflow_operation"><a class="anchor" href="#_process_tickets_internal_workflow_operation"></a>Process Tickets Internal Workflow Operation</h4>
<div class="paragraph">
<p>The Process Tickets Internal workflow works in two steps:</p>
</div>
<div class="paragraph">
<p>Procedure on Request Workflows That are Related to Tickets</p>
</div>
<div class="ulist">
<ul>
<li>
<p>During each run, it checks the status (state and application state) of all request workflows that are associated to tickets.</p>
</li>
<li>
<p>It sets the state of the ticket accordingly. This means that:</p>
</li>
<li>
<p>Workflow <strong>State=RUNNING</strong>: ticket state is not changed</p>
</li>
<li>
<p>Workflow <strong>State=SUCCEEDED</strong> and <strong>Application State=ACCEPTED</strong>: ticket <strong>State=Approval.Completed</strong></p>
</li>
<li>
<p>Workflow <strong>State=SUCCEEDED</strong> and <strong>Application State=REJECTED</strong>: ticket <strong>State=Approval.Rejected</strong></p>
</li>
<li>
<p>Workflow <strong>State=FAILED.</strong>*: ticket <strong>State=Approval.Error</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Procedure on Tickets</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It reads all tickets where the due date is reached.</p>
</li>
<li>
<p>It processes the ticket:</p>
</li>
<li>
<p>For ticket <strong>State=Approval.Completed</strong> it actualizes the order data from the workflow instance and then it processes the ticket.</p>
</li>
<li>
<p>For ticket <strong>State=Input.Completed</strong> it processes the ticket.</p>
</li>
<li>
<p>Processing the ticket means that the ticket data is applied to the subject; for example, the service changes some attributes at a user entry or some privilege assignments are assigned to a user.</p>
</li>
<li>
<p>If necessary, the subject is further processed; for example, a privilege resolution is performed for a user entry to calculate any changes coming from changed attributes or privilege assignments. Other processes might be triggered via JMS messages; for example, real-time provisioning to connected systems.</p>
</li>
<li>
<p>After successful processing, it sets the ticket <strong>State=ApplyChange.Completed</strong>. and the <strong>DeleteDate</strong>=<em>today</em>+<strong>TicketLifeTime</strong> where Ticket Life Time is the defined value at the domain object.</p>
</li>
<li>
<p>If an error occurs during processing, it does not change the status.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_account_password_manager_workflow"><a class="anchor" href="#_account_password_manager_workflow"></a>Account Password Manager Workflow</h3>
<div class="paragraph">
<p>The Account Password Manager workflow creates new passwords for DirX Identity accounts after the old password has expired. The following figure illustrates this workflow.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image12.png" alt="Account Password Management: Account Password Manager Workflow">
</div>
<div class="title">Figure 12. Account Password Management: Account Password Manager Workflow</div>
</div>
<div class="paragraph">
<p>If run scheduled, the <strong>Account Password Manager</strong> workflow searches for accounts with expired passwords according to the configured search settings, it generates a new password, stores it at the account if it is privileged and triggers the target system-specific password change workflows (setPassword workflow).</p>
</div>
<div class="paragraph">
<p>If run event-based, it handles "password expired" events (topic dxm.event.SvcTSAccount.pwd.expired) and "password changed" events (topic dxm.event.SvcTSAccount.pwd.changed). For a password expired event, it generates a new password, stores it at the account if it is privileged and sets the password reset flag to false. For a password changed event, it takes the password from the event, changes it at the account if it is privileged and sets the password reset flag as desired in the event. In both cases, it then triggers the target system-specific password change (setPassword) workflow.</p>
</div>
<div class="paragraph">
<p>Note that the message topics can contain a domain extension. For more information, see the section "Message Topics" in the <em>DirX Identity Connectivity Administration Guide</em>.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_account_password_manager_workflow"><a class="anchor" href="#_configuring_the_account_password_manager_workflow"></a>Configuring the Account Password Manager Workflow</h4>
<div class="paragraph">
<p>To run the Account Password Manager workflow successfully, you must perform these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then select the <strong>Controller</strong> tab. Adjust the settings in this tab as follows:</p>
</li>
<li>
<p>Set the search base to the desired value.</p>
</li>
<li>
<p>Do not change the scope and filter.</p>
</li>
<li>
<p>Set the correct <strong>Domain</strong> (default: <strong>My-Company</strong>).</p>
</li>
<li>
<p>Set the parameter <strong>Days before Expiration</strong> (default: 1 day).</p>
</li>
<li>
<p>Set the parameter <strong>Keep Password History at the Account</strong> to true if you want to keep a password history at the account. The history is then used to check if the new password has not been used in the past <em>x</em> times where <em>x</em> is defined by the policy. This history keeping is performed by default for privileged accounts but not otherwise.</p>
</li>
<li>
<p>Do not change the topic prefix for the "to be built" request that triggers the setPassword workflows.</p>
</li>
<li>
<p>If you want to use own attributes sent to the <strong>setPassword</strong> workflow, which uses them for resolving placeholders in it’s <strong>Notify</strong> activity, right click the <strong>join</strong> activity and choose <strong>Edit Content</strong>. Go to the controller section of the <strong>PwdAccountExpireController</strong> and add the multi-value property <strong>accountAttrs</strong> with the desired attribute list outside the operation section.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_account_password_manager_workflow_operation"><a class="anchor" href="#_account_password_manager_workflow_operation"></a>Account Password Manager Workflow Operation</h4>
<div class="paragraph">
<p>Password expiration for privileged or personal accounts (see the <em>DirX Identity Provisioning Administration Guide</em> for more information on these accounts) depends on the assigned account password policies and on a set of attributes at the policy and the account.</p>
</div>
<div class="paragraph">
<p>If run scheduled, the workflow searches for accounts with expired passwords according to the configured search settings. It generates a new password, stores it at the account if it is privileged and triggers the target system-specific setPassword workflow. If run event-based, it handles "password expired" and "password changed" requests for a specific account and then proceeds as in the scheduled case.</p>
</div>
<div class="paragraph">
<p>The password policy is assigned via the password policy link (attribute dxrPwdPolicyLink). If no password policy is assigned, the default password policy is used.</p>
</div>
<div class="paragraph">
<p>The expiration calculation depends on the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>dxrPwdMaxAge</strong> at the password policy, which defines the maximum allowed age of the password.</p>
</li>
<li>
<p><strong>Days before expire</strong> at the join activity, which specifies the time when to reset the account passwords before they expire. If the specified number of days before expiration is reached or passed for an account password, the workflow resets that password.</p>
</li>
<li>
<p><strong>dxrPwdChangedTime</strong> at the account, which specifies the last time the password was changed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the current date is greater than the value (dxrPwdChangedTime+pwdMaxAge-Days before expire), the workflow sets the password to a randomly-generated new value. The password reset flag is not set and the dxrPwdChangedTime is set to the current date and time.</p>
</div>
<div class="paragraph">
<p>The workflow generates a password change event that is to be processed by the corresponding setPassword workflow.</p>
</div>
<div class="paragraph">
<p>The identifier attributes of the password change event are set either with the attributes configured in the multi-value property <strong>accountAttrs</strong> described above or if not specified (default) with the default list of attributes described in the <strong>setPassword Notify</strong> activity (see "Context-senitive Help &#8594; Java-based Workflows &#8594; Real-time Port &#8594; Notification (optional)" (for Java-based Set Password Workflows) in the <em>DirX Identity Connectivity Administration Guide</em> for details). These attributes - for example mail, cn, sn or givenName - can be used as placeholders (for example, $\{IDATTR(mail)} ) in the <strong>to</strong>, <strong>from</strong> or <strong>body</strong> fields of the <strong>Notify</strong> activity.</p>
</div>
<div class="paragraph">
<p>If <strong>accountAttrs</strong> are specified, they are extended by the list of the above-mentioned default attributes if not already contained. The attributes "dxrPwdChangedTime","dxrPwdPolicyLink","dxrTSState","dxrName" and "dxrPrimaryKey" are also appended by the <strong>Account Password Manager</strong> and the <strong>Reset Account Passwords</strong> workflows and can therefore also be used as placeholder attributes for notification messages.</p>
</div>
<div class="paragraph">
<p>Note that the accountAttrs must be specified in the controller section outside the operation section. For example, set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;controller className="com.siemens.dxm.pwdexpire.PwdAccountExpireController"&gt;
  &lt;mvproperty name="accountAttrs"&gt;
    &lt;value&gt;description&lt;/value&gt;
    &lt;value&gt;givenName&lt;/value&gt;
  &lt;/mvproperty&gt;
  &lt;operation&gt;
    &lt;property name="searchBase" value="...” /&gt;
    ...
  &lt;/operation&gt;
&lt;/controller&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>if you want to add the attributes description and givenName to the default list of identifier attributes.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reset_account_passwords_workflow"><a class="anchor" href="#_reset_account_passwords_workflow"></a>Reset Account Passwords Workflow</h3>
<div class="paragraph">
<p>The Reset Account Passwords workflow resets passwords of DirX Identity accounts. This workflow can be used if a restore of a connected system has occurred, for example, due to a system failure that required restoration of the previous backup. The following figure illustrates this workflow.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image13.png" alt="Account Password Management: Reset Account Passwords Workflow">
</div>
<div class="title">Figure 13. Account Password Management: Reset Account Passwords Workflow</div>
</div>
<div class="paragraph">
<p>The Reset Account Passwords workflow runs only scheduled and searches for accounts according to the configured search settings. When the account is privileged, the workflow generates a new password and stores it at the account. Otherwise it takes the password from the referenced user. Then it triggers the target system-specific password change (setPassword) workflow.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_reset_account_passwords_workflow"><a class="anchor" href="#_configuring_the_reset_account_passwords_workflow"></a>Configuring the Reset Account Passwords Workflow</h4>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then select the <strong>Controller</strong> tab. Adjust the following settings in this tab:</p>
</li>
<li>
<p>Set the search base to the desired value.</p>
</li>
<li>
<p>Set the filter accordingly. By default, the workflow selects all objects of type <strong>dxrTargetSystemAccount</strong> with <strong>dxrType=Privileged</strong>. Set <strong>dxrType=Personal</strong> if you intend to handle personal accounts.</p>
</li>
<li>
<p>Set the correct <strong>Domain</strong> (default: <strong>My-Company</strong>).</p>
</li>
<li>
<p>If you want to use own attributes sent to the <strong>setPassword</strong> workflow, which uses them for resolving placeholders in its <strong>Notify</strong> activity, right click the <strong>join</strong> activity and choose <strong>Edit Content</strong>. Go to the controller section of the <strong>PwdAccountResetController</strong> and add the multi value property <strong>accountAttrs</strong> with the desired attribute list outside the operation section.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and then select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_reset_account_passwords_workflow_operation"><a class="anchor" href="#_reset_account_passwords_workflow_operation"></a>Reset Account Passwords Workflow Operation</h4>
<div class="paragraph">
<p>The Reset Account Passwords workflow searches for accounts according to the configured search settings. Depending on the account type, the workflow performs these actions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a personal account, it reads the password from the user. The password reset flag is set accordingly to the user&#8217;s password reset flag.</p>
</li>
<li>
<p>For a privileged account, it generates a new password and sets it at the account. The password reset flag is set to true.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The workflow generates a password change event that is to be processed by the corresponding setPassword workflow. . For the list of identifier attributes contained in the password change event and used by the <strong>setPassword</strong> workflow to resolve placeholders for the notification messages see the description in the "Account Password Manager Workflow" section above. For more information on personal and privileged accounts, see the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reset_password_if_displayed_workflow"><a class="anchor" href="#_reset_password_if_displayed_workflow"></a>Reset Password If Displayed Workflow</h3>
<div class="paragraph">
<p>The Reset Password If Displayed workflow resets passwords of privileged DirX Identity accounts. This workflow can be used if the password of a privileged account has been read and must be changed within a given time frame (for example, within 24 hours).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="_images/ch6_maintWFs/image14.png" alt="Account Password Management: Reset Password If Displayed Workflow">
</div>
<div class="title">Figure 14. Account Password Management: Reset Password If Displayed Workflow</div>
</div>
<div class="paragraph">
<p>The Reset Password If Displayed workflow only runs scheduled. Alternatively, it can be started directly using the <strong>Run Workflow</strong> menu operation in the DirX Identity Manager. It searches for (privileged) accounts according to the configured search settings where the password has been displayed before the last <em>n</em> hours (see the option <strong>Hours before Reset</strong>). For each such account, it generates a new password. If the account is privileged, it stores the password at the account. It then triggers the password change (setPassword) workflow that is responsible for this target system.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_reset_password_if_displayed_workflow"><a class="anchor" href="#_configuring_the_reset_password_if_displayed_workflow"></a>Configuring the Reset Password If Displayed Workflow</h4>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The workflow wizard guides you through all the required configuration steps. It displays the following steps:</p>
</div>
<div class="paragraph">
<p><strong>Template</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>Reset Password If Displayed</strong> workflow</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General Info</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the workflow name (<strong>Name</strong> field).</p>
</li>
<li>
<p>Set the <strong>Is Active</strong> flag.</p>
</li>
<li>
<p>Adapt the workflow timeout (<strong>Timeout</strong> field).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Join Activity General Info</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Assign the resource family, if necessary (<strong>Resource family</strong> field).</p>
</li>
<li>
<p>Adapt the <strong>Error Handling</strong> parameters, if necessary (<strong>Timeout</strong>, <strong>Retry Limit</strong>, <strong>Wait before Retry</strong> fields).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Join Activity Search Parameters / Days before Reset</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Adapt the parameters for retrieving the privileged accounts (<strong>Search Base</strong>, <strong>Scope</strong>, <strong>Filter</strong>).</p>
</li>
<li>
<p>Adapt the <strong>Hours before Reset</strong> parameter.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This parameter defines the minimum time in hours that must have passed before the password is reset. The time at which the password was read is stored in the attribute dxrPwdDisplayTime. A parameter value <strong>0</strong> implies that all accounts are searched where the attribute dxrPwdDisplayTime is set. A value &gt; <strong>0</strong> defines the number of hours that must have passed from now so that the account will be part of the search result.</p>
</div>
<div class="paragraph">
<p><strong>Set Workflow Name</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Set the workflow name, if not yet done in the <strong>General Info</strong> step (<strong>Name</strong> field).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Once the workflow has been created successfully, select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</div>
<div class="paragraph">
<p>Right-click the workflow object and then select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reset_password_if_displayed_operation"><a class="anchor" href="#_reset_password_if_displayed_operation"></a>Reset Password If Displayed Operation</h4>
<div class="paragraph">
<p>The Reset Password If Displayed workflow searches for (privileged) accounts according to the configured search settings whose password was displayed before the last <em>n</em> hours.</p>
</div>
<div class="paragraph">
<p>For each account in the search result, it obtains the appropriate password policy and then generates a new password that complies with the password policy.</p>
</div>
<div class="paragraph">
<p>The password policy is retrieved as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the account has set the attribute dxrPwdPolicyLink, then that policy is used.</p>
</li>
<li>
<p>Otherwise it looks for the target system&#8217;s password policy; that is, the password policy assigned in the target system&#8217;s attribute dxrPwdPolicyLink.</p>
</li>
<li>
<p>If the target system has no password policy assigned and the account has an associated user, it takes the password policy referenced from the user.</p>
</li>
<li>
<p>If it does not find any password policy, it takes the default password policy of the domain.</p>
</li>
<li>
<p>If there is no default policy, it generates an error.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the account is privileged, the workflow stores the new password at the account.</p>
</div>
<div class="paragraph">
<p>The workflow generates a password change event that is to be processed by the corresponding setPassword workflow.</p>
</div>
<div class="paragraph">
<p>Note that the setPassword workflow is started so that it does not send e-mails after successful reset of the password in the connected system.</p>
</div>
<div class="paragraph">
<p>For more information on personal and privileged accounts, see the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_password_event_manager_workflow"><a class="anchor" href="#_user_password_event_manager_workflow"></a>User Password Event Manager Workflow</h3>
<div class="paragraph">
<p>The <strong>User Password Event Manager</strong> workflow is part of the password provisioning scenario. For more information about the complete scenario, see the chapter "Managing Passwords" in the <em>DirX Identity Connectivity Administration Guide.</em></p>
</div>
<div class="sect3">
<h4 id="_configuring_the_user_password_event_manager_workflow"><a class="anchor" href="#_configuring_the_user_password_event_manager_workflow"></a>Configuring the User Password Event Manager Workflow</h4>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>General</strong> tab:</p>
</div>
<div class="paragraph">
<p>Enter a proper resource family into <strong>Resource Family</strong>. It is a good idea to have a separate resource family for this type of workflow to ensure that the corresponding threads do not compete with threads performing other workflows.</p>
</div>
<div class="paragraph">
<p>In the <strong>Error Handling</strong> section, specify the timeout for the activity, the retry limit and the waiting time between retries.</p>
</div>
<div class="paragraph">
<p><strong>Controller</strong> tab:</p>
</div>
<div class="paragraph">
<p>Select the join engine type <strong>UserPasswordEventManagerController</strong>. It automatically determines the proper class name.</p>
</div>
<div class="paragraph">
<p>If you want a user hook to be called during event processing, enter its full class name into <strong>Userhook Class Name</strong>. Make sure the library (jar file) containing your classes and all others on which they depend are deployed in the following folder beneath the installation:</p>
</div>
<div class="paragraph">
<p><em>install_path</em>/<strong>ids-j</strong>-<em>domain</em>-<strong>S</strong><em>n</em>/<strong>confdb/common/lib</strong></p>
</div>
<div class="paragraph">
<p>For information on how to write a user hook, see the <em>DirX Identity Customization Guide</em>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>notify</strong> part of the join activity and then adjust the settings in the following tabs:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Notification</strong> tab:</p>
</div>
<div class="paragraph">
<p>Define the mail to be sent on common user password changes.</p>
</div>
<div class="paragraph">
<p><strong>Notification on Reset</strong> tab:</p>
</div>
<div class="paragraph">
<p>Define the mail to be sent on reset of a user password.</p>
</div>
<div class="paragraph">
<p><strong>Recipients</strong> tab:</p>
</div>
<div class="paragraph">
<p>Define recipients of the notifications for password change and reset operations.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>General</strong> tab of the workflow:</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and then select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_user_password_expiration_notification_workflow"><a class="anchor" href="#_user_password_expiration_notification_workflow"></a>User Password Expiration Notification Workflow</h3>
<div class="paragraph">
<p>The <strong>User Password Expiration Notification</strong> workflow is running in the Java-based Server and has replaced the older PwExpirationNotification workflow running in the C++-based Server. It finds users whose passwords are about to expire and informs the users about it by sending a notification mail. Unlike the old workflow, which used the MailConnector, the new one sends the notifications over the <strong>notify</strong> port using the NotifyChannelConnector as it is done for almost all other realtime workflows.</p>
</div>
<div class="paragraph">
<p>More information about the <strong>notify</strong> port functionality can be found in the "Context Sensitive Help" in the <em>DirX Identity Connectivity Administration Guide</em>.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_user_password_expiration_notification_workflow"><a class="anchor" href="#_configuring_the_user_password_expiration_notification_workflow"></a>Configuring the User Password Expiration Notification Workflow</h4>
<div class="paragraph">
<p>To run the User Password Expiration Notification workflow successfully you must perform these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the join activity and then select the <strong>Controller</strong> tab. Adjust the settings in this tab as follows:</p>
</li>
<li>
<p>Set the <strong>Number of Notifications</strong> to the desired value.</p>
</li>
<li>
<p>Do not change the selected Join Engine controller <strong>PwdUserExpireController</strong> unless you have changed the component description <strong>PwdUserExpireController.xml</strong> of that controller under <strong>Expert View</strong> &#8594; <strong>Configuration</strong> &#8594; <strong>GUI</strong> &#8594; <strong>system</strong> &#8594; <strong>componentDescriptions</strong> to adjust for example the initial content for the controller’s properties. Those changes would become active then for every newly created workflow.</p>
</li>
<li>
<p>Right-click the join activity and then select <strong>Edit Content</strong> if you want to adjust the following properties of the <strong>PwdUserExpireController</strong>’s controller section:</p>
</li>
<li>
<p><strong>searchBase</strong> - set to *cn=Users,cn=*<em>domain</em> by default, where <em>domain</em> automatically resolves to the domain to which your workflow was copied. Must not be changed usually.</p>
</li>
<li>
<p><em>domain</em> - set by default to the domain to which your workflow was copied. It is used for searching the password policies and should not be changed.</p>
</li>
<li>
<p><strong>userAttrs</strong> - the multi value property contains the list of all attributes either the <strong>PwdUserExpireController</strong> needs to calculate the password expiration date, which are <strong>dxrPwdChangedTime</strong> and <strong>dxrPwdExpiryNotified</strong>, or those to be used in <strong>${IDATTR(&lt;<strong><em>attr_name</em></strong>&gt;)}</strong> expressions in the mail parameters of the notify port, for example, in the mail body or mail subject. The attributes configured by default are <strong>sn</strong>, <strong>givenName</strong>, <strong>mail</strong>.<br>
If you want to use more attributes, you can extend this multi-value property.<br>
<br>
There are two pseudo attributes (not in LDAP) that the <strong>PwdUserExpireController</strong> automatically adds to the <strong>userAttrs</strong> list which can also be used in the <strong>IDATTR</strong> expressions of the mail parameters:<br>
<strong>daysToExpire</strong> - the number of days after which the user’s password will expire.<br>
<strong>expirationDate</strong> - the expiration date of the user’s password.</p>
</li>
<li>
<p>Beneath the join activity, select the <strong>notify</strong> port, then select the <strong>Notification</strong> tab and adjust the mail parameters to your needs. The <strong>${IDATTR(&lt;<strong><em>attr_name</em></strong>&gt;)}</strong> expressions can be used for any attributes, that are contained in <strong>userAttrs</strong>.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow.</p>
</li>
<li>
<p>Right-click the workflow object and select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_user_password_expiration_notification_workflow_operation"><a class="anchor" href="#_user_password_expiration_notification_workflow_operation"></a>User Password Expiration Notification Workflow Operation</h4>
<div class="paragraph">
<p>The workflow only runs scheduled and searches for users under the configured search base whose passwords are about to expire and notifies the affected users about it.</p>
</div>
<div class="paragraph">
<p>Password expiration for users depends on the assigned user password policy and on a set of attributes at the policy and the user.</p>
</div>
<div class="paragraph">
<p>The password policy is assigned via the password policy link (attribute dxrPwdPolicyLink). If no password policy is assigned, the default password policy is used.</p>
</div>
<div class="paragraph">
<p>The expiration calculation depends on the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>dxrPwdMaxAge</strong> (Maximum age) - at the password policy. It defines the maximum allowed age of the password.</p>
</li>
<li>
<p><strong>dxrPwdExpireWarning</strong> (Expiration Warning Time) - at the password policy. It defines the time at which to warn about a pending password expiration.</p>
</li>
<li>
<p><strong>dxrPwdChangedTime</strong> (Password Changed Time) - at the user entry. It defines the last time the password was changed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the current date is greater than (<strong>dxrPwdChangedTime+dxrPwdMaxAge-dxrPwdExpireWarning</strong>), the workflow sends a notification e-mail.</p>
</div>
<div class="paragraph">
<p>After sending the e-mail, the <strong>dxrPwdExpiryNotified</strong> (Password Expiration Notified) attribute of the user entry is incremented. If the configured <strong>Number of Notifications</strong> is reached no more mails are sent on subsequent workflow runs.</p>
</div>
<div class="paragraph">
<p>When the user changes the password or an administrator resets the password with Web Center the <strong>dxrPwdExpiryNotified</strong> attribute is reset to <strong>0</strong> again.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_transport_workflows"><a class="anchor" href="#_transport_workflows"></a>Transport Workflows</h3>
<div class="paragraph">
<p>You can transfer data between Identity Store instances with several methods. For an overview see the chapter "Transporting Data" in the chapter "Using Utilities" of the <em>DirX Identity User Interfaces Guide</em>.</p>
</div>
<div class="paragraph">
<p>This section describes the available transport workflow samples. You can transport data between Connectivity and Provisioning domains. Because this is slightly different, we provide four sample workflows that you can use to set up your own procedures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Export Connectivity Collections - shows how to export data from a Connectivity configuration domain.</p>
</li>
<li>
<p>Import Connectivity Collections - shows how to import data into a Connectivity configuration domain.</p>
</li>
<li>
<p>Export Provisioning Collections - shows how to export data from a Provisioning configuration domain.</p>
</li>
<li>
<p>Import Provisioning Collections - shows how to import data into a Provisioning configuration domain.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_export_connectivity_collections"><a class="anchor" href="#_export_connectivity_collections"></a>Export Connectivity Collections</h4>
<div class="paragraph">
<p>This sample workflow exports by default Java-based LDAP workflows based on a collection rule. To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Make sure your scenario includes an existing <strong>ConfDB</strong> connected directory from where you want to export. Your scenario should have two instances of this connected directory with an intermediate workflow line between them. Right-click the workflow line and then select <strong>New</strong> to copy the workflow <strong>Export Connectivity Collections</strong>.</p>
</li>
<li>
<p>The first tab asks for a new workflow name. Enter your desired name.</p>
</li>
<li>
<p>In the <strong>General Workflow Info</strong> tab, check the <strong>Timeout</strong> parameter if appropriate and activate the workflow.</p>
</li>
<li>
<p>In the <strong>Connection</strong> tab:</p>
</li>
<li>
<p>Open <strong>Bind profile</strong> and check the bind profile parameters.</p>
</li>
<li>
<p>Open <strong>Connected directory</strong> and follow the link to <strong>Service</strong>. Check for correct parameters.</p>
</li>
<li>
<p>In the <strong>Export Definitions</strong> tab</p>
</li>
<li>
<p>Define either a search in the <strong>Filter</strong> area to retrieve a set of Connectivity collections to export (you need not define the object class dxmIDMWorkflow, define only additional criteria) or select a list of Connectivity collections in the <strong>Collections</strong> area. Note that you can only use one of these options.</p>
</li>
<li>
<p>Determine whether to create standard LDIF format with Base64 content or use the default readable format. Because readable format works best for configuration management systems and data that must be changed during import transport workflows, we recommend that you keep the default (no standard LDIF format).</p>
</li>
<li>
<p>If you want to generate data for a configuration management system, restrict the generated line length. Check the configuration management documentation. For ClearCase, we recommend a line length of 2000.</p>
</li>
<li>
<p>Click <strong>Finish</strong> to store your new workflow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can run the workflow either manually or via a schedule.</p>
</div>
</div>
<div class="sect3">
<h4 id="_import_connectivity_collections"><a class="anchor" href="#_import_connectivity_collections"></a>Import Connectivity Collections</h4>
<div class="paragraph">
<p>This sample workflow imports by default the previously exported set of Java-based LDAP workflows (see the Export Connectivity Collections workflow).</p>
</div>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Make sure your scenario includes an existing <strong>ConfDB</strong> connected directory from where you want to export. Your scenario should have two instances of this connected directory with an intermediate workflow line between them. Right-click the workflow line and then select <strong>New</strong> to copy the workflow <strong>Import Connectivity Collections</strong>.</p>
</li>
<li>
<p>The first tab asks for a new workflow name. Enter your desired name.</p>
</li>
<li>
<p>In the <strong>General Workflow Info</strong> tab, check the <strong>Timeout</strong> parameter if appropriate and activate the workflow.</p>
</li>
<li>
<p>In the <strong>Connection</strong> tab:</p>
</li>
<li>
<p>Open <strong>Bind profile</strong> and check the bind profile parameters for your target connected directory.</p>
</li>
<li>
<p>Open <strong>Connected directory</strong> and follow the link to <strong>Service</strong>. Check for correct parameters.</p>
</li>
<li>
<p>In the <strong>Deletion</strong> tab:</p>
</li>
<li>
<p>Enable the <strong>Is Active</strong> flag if you intend to delete a set of entries before the import operation.</p>
</li>
<li>
<p>In the <strong>Collection</strong> area, list all collection definitions (its DNs) that are to be used to delete the entries.</p>
</li>
<li>
<p>In the <strong>Import Definitions</strong> tab:</p>
</li>
<li>
<p>In the <strong>Import</strong> area, select all files you want to import.</p>
</li>
<li>
<p>By default, the files are type LDIF. In the <strong>SPML</strong> area, you can select SPML format and you can select that the SPML file is to be validated before the import.</p>
</li>
<li>
<p>Set the required options in the <strong>LDIF</strong> area; for example, an input filter that retrieves only specific object types from your files.</p>
</li>
<li>
<p>You can use the <strong>dryrun</strong> option of the <strong>Simulation Mode</strong> for a dry run. Use the log file to check the effects.</p>
</li>
<li>
<p>Click <strong>Finish</strong> to store your new workflow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Import workflows help to filter and adapt the data. To control the mappings, perform these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Expert</strong> view and locate your workflow in your workflow folder.</p>
</li>
<li>
<p>Open this entry and then open the <strong>perform</strong> activity.</p>
</li>
<li>
<p>All mappings are located under this entry. Either change one of the existing mappings or create or delete mappings.</p>
</li>
<li>
<p>The sample workflow sets all imported workflows to active and changes the cluster and resource values (as an example).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can run the workflow either manually or via a schedule.</p>
</div>
</div>
<div class="sect3">
<h4 id="_export_provisioning_collections"><a class="anchor" href="#_export_provisioning_collections"></a>Export Provisioning Collections</h4>
<div class="paragraph">
<p>This sample workflow exports by default the complete privilege tree based on a collection rule.</p>
</div>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global View</strong>).</p>
</li>
<li>
<p>Make sure your scenario includes an existing <strong>Identity Store</strong> connected directory from where you want to export. Your scenario should have two instances of this connected directory with an intermediate workflow line between them. Right-click the workflow line and then select <strong>New</strong> to copy the workflow <strong>Export Provisioning Collections</strong>.</p>
</li>
<li>
<p>The first tab asks for a new workflow name. Enter your desired name.</p>
</li>
<li>
<p>In the <strong>General Workflow Info</strong> tab, check the <strong>Timeout</strong> parameter if appropriate and activate the workflow.</p>
</li>
<li>
<p>In the <strong>Connection</strong> tab:</p>
</li>
<li>
<p>Open <strong>Bind profile</strong> and check the bind profile parameters.</p>
</li>
<li>
<p>Open <strong>Connected directory</strong> and follow the link to <strong>Service</strong>. Check for correct parameters.</p>
</li>
<li>
<p>In the <strong>Export Definitions</strong> tab:</p>
</li>
<li>
<p>Define either a search in the <strong>Filter</strong> area to retrieve a set of Connectivity collections to export (you need not define the object class dxmIDMWorkflow, define only additional criteria) or select a list of Connectivity collections in the <strong>Collections</strong> area. Note that you can only use one of these options. To get the DNs of the collection objects, right-click the object in the Provisioning view and then select <strong>Goto DataView</strong> to retrieve the DN of the object.</p>
</li>
<li>
<p>Determine whether to create standard LDIF format with Base64 content or use the default readable format. Because readable format works best for configuration management systems and data that needs to be adapted during import transport workflows, we recommend that you keep the default (no standard LDIF format).</p>
</li>
<li>
<p>If you want to generate data for a configuration management system, restrict the generated line length. Check the configuration management documentation. For ClearCase, we recommend a line length of 2000.</p>
</li>
<li>
<p>Click <strong>Finish</strong> to store your new workflow.</p>
</li>
<li>
<p>Now you can execute the workflow either manually or via a schedule.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_import_provisioning_collections"><a class="anchor" href="#_import_provisioning_collections"></a>Import Provisioning Collections</h4>
<div class="paragraph">
<p>This sample workflow imports by default the previously exported complete privilege tree (see the Export Provisioning Collections workflow).</p>
</div>
<div class="paragraph">
<p>To configure the workflow, perform these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity &#8594; Global View</strong>).</p>
</li>
<li>
<p>Make sure your scenario includes an existing <strong>Identity Store</strong> connected directory from where you want to export. Your scenario should have two instances of this connected directory with an intermediate workflow line between them. Right-click the workflow line and then select <strong>New</strong> to copy the workflow <strong>Import Provisioning Collections</strong>.</p>
</li>
<li>
<p>The first tab asks for a new workflow name. Enter your desired name.</p>
</li>
<li>
<p>In the <strong>General Workflow Info</strong> tab, check the <strong>Timeout</strong> parameter if appropriate and activate the workflow.</p>
</li>
<li>
<p>In the <strong>Connection</strong> tab:</p>
</li>
<li>
<p>Open <strong>Bind profile</strong> and check the bind profile parameters for your target connected directory.</p>
</li>
<li>
<p>Open <strong>Connected directory</strong> and follow the link to <strong>Service</strong>. Check for correct parameters.</p>
</li>
<li>
<p>In the <strong>Deletion</strong> tab:</p>
</li>
<li>
<p>Enable the <strong>Is Active</strong> flag if you intend to delete a set of entries before the import operation.</p>
</li>
<li>
<p>List in the <strong>Collection</strong> area all collection definitions (it&#8217;s DNs) that shall be used to delete the entries.</p>
</li>
<li>
<p>In the <strong>Import Definitions</strong> tab:</p>
</li>
<li>
<p>In the <strong>Import</strong> area, select all files you want to import.</p>
</li>
<li>
<p>By default, the files are type LDIF. In the <strong>SPML</strong> area, you can select SPML format and you can select that the SPML file is to be validated before the import.</p>
</li>
<li>
<p>Set the required options in the <strong>LDIF</strong> area; for example, an input filter that retrieves only specific object types from your files.</p>
</li>
<li>
<p>You can use the <strong>dryrun</strong> option of the <strong>Simulation Mode</strong> for a dry run. Use the log file to check the effects.</p>
</li>
<li>
<p>Set the correct Domain Mappings. The default workflow changes all occurrences from "My-Company" to "Customer Domain". If you have data from different domains, you can define multiple mappings to your target domain.</p>
</li>
<li>
<p>Click <strong>Finish</strong> to store your new workflow.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Import workflows help to filter and adapt the data. To control the mappings, perform these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Click the <strong>Expert</strong> view and locate your workflow in your workflow folder.</p>
</li>
<li>
<p>Open this entry and then open the <strong>perform</strong> activity.</p>
</li>
<li>
<p>All mappings are located under this entry. Either change one of the existing mappings or create or delete mappings.</p>
</li>
<li>
<p>The sample workflow deletes all <strong>dxrGroupMember</strong> attribute values (we use the wildcard dxrGroupMember* here). Only the structure is imported, not the specific group members because these are different in your target domain.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now you can run the workflow either manually or via a schedule.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_joint_backup_workflow"><a class="anchor" href="#_joint_backup_workflow"></a>Joint Backup Workflow</h3>
<div class="paragraph">
<p>The Joint Backup workflow performs a synchronized backup of the Java-based Server’s repository and the LDAP connectivity and provisioning data store. It can also transfer the generated files to a target backup system via the Java-based Server (not currently supported) or via your own user hook class.</p>
</div>
<div class="paragraph">
<p>To transfer all generated backup files to the destination system, you can:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Manually transfer the generated files. With this method, files are not automatically cleaned up.</p>
</li>
<li>
<p>Let the IdS-J service transfer the generated files. To use this method, the IdS-J service must have the rights to access all files and the target path. If the system landscape is distributed, the IdS-J service needs to run under an appropriate account with access rights to network shares.<br>
With this method, created files are cleaned up if the file transfer fails for any reason.</p>
</li>
<li>
<p>Implement your own Java user class to transfer the files. This method is currently not supported. Contact technical support for more information.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Remote LDAP backup has the following constraint: The remote backup of an LDAP data store is performed via an LDAP extended operation. Only DirX Directory V8.1A or newer supports this operation. The DNs of users that are allowed to do a remote backup are maintained in the ldapConfiguration subentry in the attribute ldapExtOpAdmins. See the section "LDAP Extended Operations Admins" in the <em>DirX Directory Administration Reference</em> for details.</p>
</div>
<div class="paragraph">
<p>On Windows, you must install gzip 1.3.12 or newer. A suitable gzip is available on <a href="http://www.gnu.org" class="bare">http://www.gnu.org</a>. <strong>gzip.exe</strong> must be found via the <strong>PATH</strong> environment variable.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_joint_backup_workflow"><a class="anchor" href="#_configuring_the_joint_backup_workflow"></a>Configuring the Joint Backup Workflow</h4>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Activate the backup in the Java-based server. (See the section "Java-based Server - Repository" in the appendix "Context Sensitive Help" in the <em>DirX Identity Connectivity Administration Guide</em> for details.)</p>
</li>
<li>
<p>Administer the LDAP servers: Enter the DNs of the Connectivity Domain Administrator used by IdS-J (<strong>cn=DomainAdmin,cn=*<em>your_domain</em></strong>,dxmC=Users,dxmC=DirXmetahub*) and, if necessary, of the Provisioning Domain Administrator used by the IdS-J *(cn=DomainAdmin, cn=*<em>your_domain</em>) in the multi-value attribute ldapExtOpAdmins of the ldapConfiguration subentry of the appropriate DirX LDAP Server.</p>
</li>
<li>
<p>In the <strong>Controller</strong> tab of the <strong>perform</strong> activity, ensure that the fully-qualified pathname of the controller is correct: <strong>com.siemens.idm.jobs.Backup</strong>.</p>
</li>
<li>
<p>In the <strong>Backup Parameters</strong> tab of the <strong>perform</strong> activity you must set the folders where to store the backups and indicate whether this folder is located on a Windows system. Ignore the settings for the message server and leave them empty.<br>
Note: The location of the Java-based Server&#8217;s backup file is configured with the server&#8217;s configuration.</p>
</li>
<li>
<p>In the field <strong>Connectivity Configuration / Backup Path</strong>, specify the fully-qualified pathname of an existing folder for the backup location of the DirX Server that hosts the Connectivity data store.<br>
Note that the pathname must not be a part of the installation tree of the DirX Server. This is a mandatory field.<br>
Check <strong>On Windows System</strong> if the DirX Server runs on Windows.</p>
</li>
<li>
<p>If the Provisioning part is hosted on a different LDAP server, specify the fully-qualified pathname of an existing folder for the backup location in the field <strong>Provisioning Configuration / Backup Path</strong>. See also the notes above.<br>
Check <strong>On Windows System</strong> if the DirX Server runs on Windows.</p>
</li>
<li>
<p>Create a schedule for the workflow. (See the section "Schedule" in the appendix "Context Sensitive Help" in the <em>DirX Identity Connectivity Administration Guide</em> for details.)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you are letting the IdS-J service transfer the generated files, provide the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the field <strong>Target Backup System Path</strong> of the <strong>Post Operation</strong> tab, specify the fully-qualified pathname of an existing folder for the transfer location. On Windows, you can use a shared network drive, but then the IdS-J service must run under a different account from the system account and you must use the UNC syntax for the transfer folder.</p>
</li>
<li>
<p>Check <strong>On Windows System</strong> if the transfer location is hosted on Windows.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you implemented your own Java user class to transfer the generated files, provide the following information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In <strong>Userhook Class Name</strong>, specify the name of your own class.<br>
Note: This method is not currently supported. Contact technical support for more information.</p>
</li>
<li>
<p>Set the <strong>Active</strong> flag of the workflow and perform <strong>Load IdS-J Configuration</strong> from the context menu of the workflow object to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consistency_management_workflows"><a class="anchor" href="#_consistency_management_workflows"></a>Consistency Management Workflows</h3>
<div class="paragraph">
<p>The Java-based consistency management workflows include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Check Consistency workflow</p>
</li>
<li>
<p>The Mark Affected Users workflow</p>
</li>
<li>
<p>The User Resolution Workflow</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These workflows are described in the <em>DirX Identity Provisioning Administration Guide</em> in the section "Managing Consistency" in the chapter "Managing the Provisioning System".</p>
</div>
<div class="paragraph">
<p>Compared to the Tcl-based maintenance workflows, the Java-based consistency management workflows allow for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subsetting of objects for deletion and particularly consistency checks.</p>
</li>
<li>
<p>Separate user resolution workflows for clear user subsets.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Java-based and Tcl-based consistency maintenance workflows use common storage mechanisms. For optimization information, see the section "Using the Maintenance Workflows" &#8594; "Understanding the Tcl-based Maintenance Workflows" &#8594; "Consistency Check Workflow" &#8594; "Consistency Check Workflow Optimization".</p>
</div>
<div class="sect3">
<h4 id="_check_consistency_workflow"><a class="anchor" href="#_check_consistency_workflow"></a>Check Consistency Workflow</h4>
<div class="paragraph">
<p>The Java-based consistency management workflow Check Consistency applies configured consistency rules and performs basic hard-coded consistency checks. Compared to the Tcl-based Consistency Check workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Java-based workflow is a combination of a policy execution workflow handling consistency policies and the Tcl consistencyCheck workflow.</p>
</li>
<li>
<p>The workflow performs no user resolution.</p>
</li>
<li>
<p>You can select to run only part of the checks this workflow performs.</p>
</li>
<li>
<p>You can select to run the checks on a subset of objects.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about this workflow, see the section "Consistency Check and Consistency Rules" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_check_consistency_workflow"><a class="anchor" href="#_configuring_the_check_consistency_workflow"></a>Configuring the Check Consistency Workflow</h5>
<div class="paragraph">
<p>To configure the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global</strong> <strong>View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the <strong>join</strong> activity and then select the <strong>Check</strong> <strong>Consistency</strong> <strong>Attributes</strong> tab to modify the configuration. See the context-sensitive help for details about configuration parameters.</p>
</li>
<li>
<p>Right-click the workflow object and then select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because the workflow runs in the Java-based Server, you can configure tracing via Identity WebAdmin. The following packages may be involved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>com.siemens.idm.jobs.consistencyCheck</strong></p>
</li>
<li>
<p><strong>siemens.dxr.agents</strong></p>
</li>
<li>
<p><strong>siemens.dxm.ruleprocessing.rules</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following default values are used for empty attributes in the <strong>Check</strong> <strong>Consistency</strong> <strong>Attributes</strong> tab:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>LDAP Page Size - <strong>50</strong></p>
</li>
<li>
<p>Batch Accumulator Size - <strong>500</strong></p>
</li>
<li>
<p>Cache MRU Size - <strong>10000</strong></p>
</li>
<li>
<p>Check Users Search Base - <strong>cn=users,cn=my-company</strong></p>
</li>
<li>
<p>Check Users Filter - <strong>(objectClass=dxrUser)</strong></p>
</li>
<li>
<p>Search Base for Roles - <strong>cn=RoleCatalogue,cn=my-company</strong></p>
</li>
<li>
<p>Filter for Roles - <strong>(objectClass=dxrRole)</strong></p>
</li>
<li>
<p>Search Base for Permissions - <strong>cn=Permissions,cn=my-company</strong></p>
</li>
<li>
<p>Filter for Permissions - <strong>(objectClass=dxrPermission)</strong></p>
</li>
<li>
<p>Search Base for Target Systems - <strong>cn=TargetSystems,cn=my-company</strong></p>
</li>
<li>
<p>Filter for Target Systems - <strong>(objectClass=dxrTargetSystem)</strong></p>
</li>
<li>
<p>Apply Consistency Rules Search Base - no default</p>
</li>
<li>
<p>Apply Consistency Rules Filter - <strong>(objectClass=dxrConsistencyRule)</strong></p>
</li>
<li>
<p>Apply Consistency Rules sort attribute - <strong>cn</strong></p>
</li>
<li>
<p>Apply Consistency Rules sort ascending - <strong>true</strong></p>
</li>
<li>
<p>Apply Consistency Rules LDAP Page Size - <strong>300</strong></p>
</li>
<li>
<p>Apply Consistency Rules MRU Size - <strong>500</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_check_consistency_workflow_operation"><a class="anchor" href="#_check_consistency_workflow_operation"></a>Check Consistency Workflow Operation</h5>
<div class="paragraph">
<p>Check Consistency workflow operation depends on the selections configured in the Consistency Check Workflow Attributes tab (visible in the workflow&#8217;s join activity).</p>
</div>
<div class="paragraph">
<p>If <strong>Check for Privileges To Be Deleted</strong> is selected, the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches for roles, permissions, and groups in the state TBDEL.</p>
</li>
<li>
<p>For each privilege in the state TBDEL, the workflow:</p>
</li>
<li>
<p>Removes the incoming assignments to users and/or senior privileges and then sets the To Be Analyzed (TBA) flag for the affected objects.</p>
</li>
<li>
<p>Deletes roles/permissions or sets the state to DELETED if history is configured.</p>
</li>
<li>
<p>Sets the state of groups to DELETED.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <strong>Check</strong> <strong>Users</strong> is selected, the workflow performs the following steps for users that match the given search base (<strong>cn=users,cn=my-company</strong> if empty) and filter (<strong>(objectClass=dxrUser)</strong> if empty):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches all privilege assignments with relevant start or end dates. The exact filter is:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ldap hljs" data-lang="ldap">(&amp;(|(objectClass=dxrUserToRole)(objectClass=dxrUserToGroup)(objectClass=dxrUserToPermission))(|(dxrEndDate=*)(dxrStartDate=*)))</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Deletes outdated start dates, removes assignments with outdated end dates, and marks this user for privilege resolution.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Next, the workflow checks the consistency of the matching users. It:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deletes users in the state TBDEL with an expired <strong>DeleteDate</strong>.</p>
</li>
<li>
<p>Sets the <strong>DeleteDate</strong> for users in the state TBDEL that do not yet have a <strong>DeleteDate</strong> set.</p>
</li>
<li>
<p>Sets as the <strong>StartDate</strong> the current date for users in state NEW that do not yet have a <strong>StartDate</strong> set.</p>
</li>
<li>
<p>Checks whether the various date fields of the user are consistent with the user state. If not, the user is flagged with TBA for a succeeding privilege resolution.</p>
</li>
<li>
<p>Checks whether the various date fields of the user are consistent, which means that the sequence of the date fields must be <strong>StartDate</strong>, <strong>DisableStartDate</strong>, <strong>DisableEndDate</strong>, <strong>EndDate</strong>, <strong>DeleteDate</strong>.</p>
</li>
<li>
<p>Checks for broken references of privilege assignments.</p>
</li>
<li>
<p>Checks for the correct user state and then migrates the old state DELETED to TBDEL.</p>
</li>
<li>
<p>Flags users with TBA if the <strong>ErrorExpirationDate</strong> is reached.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <strong>Check Roles/Permissions</strong> is selected, the workflow performs the following steps for objects that match the specified search base and filter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Analyzes the role structures:</p>
</li>
<li>
<p>Works on all matching roles.</p>
</li>
<li>
<p>Checks whether the role is valid, that means it must have a permission or junior role assigned.</p>
</li>
<li>
<p>Checks for broken references to junior roles and assigned permissions.</p>
</li>
<li>
<p>Analyzes the permission structures:</p>
</li>
<li>
<p>Works on all matching permissions.</p>
</li>
<li>
<p>Checks whether the permission is valid, that means it must have a group assigned.</p>
</li>
<li>
<p>Checks for broken references to assigned groups.</p>
</li>
<li>
<p>Checks whether the permission is assigned to users if it is not flagged for user assignment.</p>
</li>
<li>
<p>Checks for correct permission parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If <strong>Check Accounts/Groups</strong> is selected, the workflow performs the following steps for all accounts/groups of the target systems that match the specified search base and filter:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Checks whether the <strong>Local</strong> <strong>Admin</strong> link of a target system is broken.</p>
</li>
<li>
<p>Works on all matching target system accounts.</p>
</li>
<li>
<p>Deletes all accounts that are marked with <strong>Managed in Target System Only</strong> that are in state <strong>Deleted</strong> in the target system.</p>
</li>
<li>
<p>Checks whether the target system of this account is of the correct type and exists.</p>
</li>
<li>
<p>Checks for multiple primary accounts for a user.</p>
</li>
<li>
<p>Checks whether the <strong>User</strong> <strong>Link</strong> of the account is broken.</p>
</li>
<li>
<p>Checks for correct account states.</p>
</li>
<li>
<p>Deletes accounts that are in the state DELETED and whose <strong>EndDate</strong> is expired.</p>
</li>
<li>
<p>Checks that the account is either marked <strong>Managed in Target System Only</strong> and has no user link assigned or that it is not marked <strong>Managed in Target System Only</strong> and has a user link assigned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When analyzing target system groups, the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Works on all matching target system groups.</p>
</li>
<li>
<p>Deletes all groups that are marked <strong>Managed</strong> <strong>in</strong> <strong>Target</strong> <strong>System</strong> <strong>Only</strong> that are in the state <strong>Deleted</strong> in the target system.</p>
</li>
<li>
<p>Checks whether all permission parameter values (<strong>dxrRPValues</strong>) are consistent with the permission parameter definition at the domain root object.</p>
</li>
<li>
<p>Checks for broken obligation links.</p>
</li>
<li>
<p>Checks for broken group members.</p>
</li>
<li>
<p>Checks whether the groups state has a correct value.</p>
</li>
<li>
<p>Deletes groups in the states DELETED or DISABLED with expired <strong>EndDate</strong>s.</p>
</li>
<li>
<p>Updates the distribution list of a virtual group.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If Apply Consistency Rules is selected, the workflow applies all consistency rules that match the specified search base and filter.</p>
</div>
<div class="paragraph">
<p>Rule processing works in the <strong>Assign</strong> <strong>privilege</strong> <strong>only</strong> provisioning mode with <strong>Suppress</strong> <strong>Change</strong> <strong>Events</strong> set to <strong>true</strong>. This processing mode means that no user resolution is performed and no user change events are initiated.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_mark_affected_users_workflow"><a class="anchor" href="#_mark_affected_users_workflow"></a>Mark Affected Users Workflow</h4>
<div class="paragraph">
<p>The Java-based consistency management workflow Mark Affected Users finds privileges with <strong>dxrTBA = true</strong>, finds the users that might be affected by a change and sets the <strong>flag dxrTBA = true</strong> for these users. The User Resolution workflow will then subsequently ensure their resolution.</p>
</div>
<div class="paragraph">
<p>This functionality is the same as provided in the Consistency Check Tcl-based maintenance workflow. In the Mark Affected Users workflow, the functionality is separated into a single workflow and can be run more frequently. It is best to run it before the User Resolution workflow. For more information about this workflow, see the section "Consistency Check and Consistency Rules" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_mark_affected_users_workflow"><a class="anchor" href="#_configuring_the_mark_affected_users_workflow"></a>Configuring the Mark Affected Users Workflow</h5>
<div class="paragraph">
<p>To configure the Java-based Mark Affected Users workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global</strong> <strong>View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the join activity and then select the <strong>Optimization</strong> <strong>Attributes</strong> tab to modify the configuration. See the context-sensitive help for details about the configuration parameters provided in this tab.</p>
</li>
<li>
<p>Right-click the workflow object and then select <strong>Load IdS-J Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because the workflow runs in the Java-based Server, you can configure tracing via Identity WebAdmin. The following packages may be involved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>com.siemens.idm.jobs.consistencyCheck</strong></p>
</li>
<li>
<p>siemens.dxr.agents</p>
</li>
<li>
<p>siemens.dxm.ruleprocessing.rules</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following default values are used for empty attributes in the <strong>Optimization</strong> <strong>Attributes</strong> tab:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>LDAP Page Size - <strong>50</strong></p>
</li>
<li>
<p>Batch Accumulator Size - <strong>500</strong></p>
</li>
<li>
<p>Cache MRU Size - <strong>10000</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_mark_affected_users_workflow_operation"><a class="anchor" href="#_mark_affected_users_workflow_operation"></a>Mark Affected Users Workflow Operation</h5>
<div class="paragraph">
<p>The Mark Affected Users workflow performs the following steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches the entire user and privilege database.</p>
</li>
<li>
<p>Sets the To Be Analyzed) (TBA) flag for all users that have a privilege assigned that is itself flagged with TBA. The workflow considers direct and indirect relationships (indirect relationships go via a role or permission).</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_user_resolution_workflow"><a class="anchor" href="#_user_resolution_workflow"></a>User Resolution Workflow</h4>
<div class="paragraph">
<p>The Java-based consistency management workflow User Resolution performs the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Applies provisioning rules to users.</p>
</li>
<li>
<p>Enables or removes user-privilege assignments where start or end dates are reached.</p>
</li>
<li>
<p>Finds users where the state must be changed because one of the corresponding start or end dates has been changed.</p>
</li>
<li>
<p>Triggers user-privilege resolution for all matching users by sending a message to the Resolution Adapter per user.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Compared to its Tcl-based counterpart, the Java-based User Resolution workflow is a combination of a policy execution workflow handling Provisioning rules and parts of the Tcl PrivilegeResolution workflow. You can use configuration parameters to limit the set of users and rules to be evaluated. For more information about this workflow, see the section "Consistency Check and Consistency Rules" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</div>
<div class="sect4">
<h5 id="_configuring_the_user_resolution_workflow"><a class="anchor" href="#_configuring_the_user_resolution_workflow"></a>Configuring the User Resolution Workflow</h5>
<div class="paragraph">
<p>To configure the Java-based User Resolution workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the Identity Manager to copy the workflow to your scenario (<strong>Connectivity</strong> &#8594; <strong>Global</strong> <strong>View</strong>).</p>
</li>
<li>
<p>Select <strong>Connectivity</strong> &#8594; <strong>Expert</strong> <strong>View</strong> and then select the copied workflow object.</p>
</li>
<li>
<p>Select the join activity and then select the <strong>Resolution</strong> <strong>Attributes</strong> tab to modify the configuration. See the context-sensitive help for details about the configuration parameters provided in this tab.</p>
</li>
<li>
<p>Right-click the workflow object and then select <strong>Load</strong> <strong>IdS-J</strong> <strong>Configuration</strong> to load the workflow into the Java-based Server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Because the workflow runs in the Java-based Server, you can configure tracing via Identity WebAdmin. The following packages may be involved:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>com.siemens.idm.jobs.consistencyCheck</strong></p>
</li>
<li>
<p><strong>siemens.dxr.agents</strong></p>
</li>
<li>
<p><strong>siemens.dxm.ruleprocessing.rules</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following default values are used for empty attributes in the <strong>Resolution</strong> <strong>Attributes</strong> tab:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Filter for users - <strong>(objectClass=dxrUser)</strong></p>
</li>
<li>
<p>LDAP Page Size for Provisioning Rules-<strong>300</strong></p>
</li>
<li>
<p>Cache MRU Size for Provisioning Rules - <strong>10000</strong></p>
</li>
<li>
<p>Batch Accumulator Size for Provisioning Rules - <strong>500</strong></p>
</li>
<li>
<p>LDAP Page Size for User Resolution - <strong>50</strong></p>
</li>
<li>
<p>Cache MRU Size for User Resolution - <strong>10000</strong></p>
</li>
<li>
<p>Batch Accumulator Size for User Resolution- <strong>500</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="_user_resolution_workflow_operation"><a class="anchor" href="#_user_resolution_workflow_operation"></a>User Resolution Workflow Operation</h5>
<div class="paragraph">
<p>To analyze users and assignments, the workflow performs the following actions for the given user filter and search base:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches all privilege assignments with relevant start or end dates. The exact filter is:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ldap hljs" data-lang="ldap">(&amp;(|(objectClass=dxrUserToRole)(objectClass=dxrUserToGroup)(objectClass=dxrUserToPermission))(|(dxrEndDate&lt;=today)(dxrStartDate&lt;=today)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <em>today</em> is replaced with the current date</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deletes the start date or privilege assignment and marks this user for privilege resolution.</p>
</li>
<li>
<p>Searches for matching users that must undergo a state transition: it searches for all matching users with an inconsistent state and dates and flags these users with TBA. The exact filter is:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ldap hljs" data-lang="ldap">(&amp;(objectClass=dxrUser)(|(&amp;(dxrEndDate&lt;=today)(|(dxrState=ENABLED)(dxrState=DISABLED)))(&amp;(dxrStartDate&lt;=today)(dxrState=NEW))(&amp;(dxrDisableEndDate&lt;=today)(dxrState=DISABLED))(&amp;(dxrDisableStartDate&lt;=today)(dxrState=ENABLED))(dxrDeleteDate&lt;=today)(&amp;(dxrState=TBDEL)(!(dxrEndDate&lt;=today)))))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Next, the workflow applies the selected Provisioning rules. The rules are implicitly combined with the given user filter and search base, which means that rules are only applied for the given subset of users.</p>
</div>
<div class="paragraph">
<p>Finally, the workflow sends a message to the Resolution Adapter for all users that match the given search base and filter and are flagged with <strong>dxrTBA=true</strong>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="understanding_tcl_based_maintenance_workflows"><a class="anchor" href="#understanding_tcl_based_maintenance_workflows"></a>Understanding the Tcl-based Maintenance Workflows</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Tcl-based maintenance workflow typically runs scheduled and as a process in the C++-based Server (IdS-C). The pre-configured Tcl-based maintenance workflows include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>CleanupObjects</strong> - a workflow that cleans up all deleted or outdated objects. If auditing is enabled, the objects are only cleaned if all audit trail records are removed. This workflow is a special configuration for the policy execution service.</p>
</li>
<li>
<p><strong>ConsistencyCheck</strong> (Java workflow) <strong>-</strong> a workflow that checks the Identity Store for consistency and performs role resolution.</p>
</li>
<li>
<p><strong>ExtractAuditTrail</strong> - a workflow that checks the Identity Store for audit trail records (auditing information), writes them to the audit trail database and cleans up the audit trail records in the Identity Store.</p>
</li>
<li>
<p><strong>FullSoDCheck</strong> - a workflow that checks the entire DirX Identity user database for SoD violations.</p>
</li>
<li>
<p><strong>InitializeReapproval</strong> - a workflow that checks that all user-to-privilege assignments from privileges with checked re-approval are flagged correctly.</p>
</li>
<li>
<p><strong>PwdExpirationNotification</strong> - a workflow that checks for passwords that are about to expire and warns the corresponding users to change them before the expiration date. This workflow has been replaced by the <strong>UserPasswordExpirationNotification</strong> workflow, which runs in the Java-based Server, but can still be used if the customer has already copied it to his scenario.</p>
</li>
<li>
<p><strong>PolicyExecution -</strong> a workflow that applies a set of rules to a set of provisioning objects in the Identity Store and can also perform privilege resolution. This workflow is part of the "policy execution service".</p>
</li>
<li>
<p><strong>PrivilegeResolution -</strong> a workflow that performs privilege resolution without checking the Identity Store for consistency.</p>
</li>
<li>
<p><strong>RunWorkflowExternally</strong> - a workflow that can start workflows in another Connectivity domain that is based on another Connectivity configuration database.</p>
</li>
<li>
<p><strong>StartReapprovalWorkflows</strong> - a workflow that checks for necessary re-approval. It starts the corresponding request workflows.</p>
</li>
<li>
<p><strong>Status Report Generation -</strong> a workflow that writes a report in XML or HTML format for objects of the Provisioning or Connectivity view group to a file.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_cleanup_objects_workflow"><a class="anchor" href="#_cleanup_objects_workflow"></a>Cleanup Objects Workflow</h3>
<div class="paragraph">
<p>The Cleanup Objects workflow runs the policy execution service. By default, the workflow is configured for all consistency rules whose names start with "cleanup". The default rules are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>cleanupDeletedObjects</strong> - removes all objects in state DELETED without history and whose endDate empty or passed.<br>
Note that User objects are not handled by this rule. The service agent deletes User objects that are in state TBDEL and whose endDate has passed.</p>
</li>
<li>
<p><strong>cleanupOutDatedDelegations</strong> - removes Delegations whose drxDeleteDate is reached.</p>
</li>
<li>
<p><strong>cleanupOutDatedRequWflowInstances</strong> - removes all request workflow instances whose dxmStatusExpirationTime has been reached.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_cleanup_objects_workflow"><a class="anchor" href="#_configuring_the_cleanup_objects_workflow"></a>Configuring the Cleanup Objects Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Rule Search Parameters</strong> tab, you can change the cleanup rules to be executed. By default, the workflow uses three standard rules whose names start with "cleanup".</p>
</li>
<li>
<p>In the <strong>User Search Parameters</strong> tab, you can set several parameters to optimize runs. See the section "Policy Agent Optimization" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, the workflow reports errors and warnings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We recommend that you run this workflow once daily to remove all objects whose lifetime has expired.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_consistency_check_workflow"><a class="anchor" href="#_consistency_check_workflow"></a>Consistency Check Workflow</h3>
<div class="paragraph">
<p>The Consistency Check workflow runs the service agent in <strong>checkConsistency</strong> mode. This section describes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>How to configure the workflow</p>
</li>
<li>
<p>The service agent configuration (*.ini) file</p>
</li>
<li>
<p>How the workflow operates</p>
</li>
<li>
<p>How to optimize the workflow</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_consistency_check_workflow"><a class="anchor" href="#_configuring_the_consistency_check_workflow"></a>Configuring the Consistency Check Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Consistency Check Parameters</strong> tab, set the <strong>Subject Filter</strong>. This setting allows you to define the number of users the service agent is to check. The default filter checks all users that are flagged with the <strong>dxrTBA</strong> flag (this flag indicates that the entry is "to be analyzed").</p>
</li>
<li>
<p>In the <strong>Consistency Check Limits</strong> tab, you can set several parameters that you can use to optimize runs. See the section "Service Agent Configuration File" for a detailed explanation.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, only errors are reported.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a detailed description of the consistency check procedure, see the section "Consistency Check Workflow Operation".</p>
</div>
<div class="paragraph">
<p>The complete list of INI file parameters is shown in the next section.</p>
</div>
</div>
<div class="sect3">
<h4 id="_service_agent_configuration_file"><a class="anchor" href="#_service_agent_configuration_file"></a>Service Agent Configuration File</h4>
<div class="paragraph">
<p>The service agent initialization file (*.ini) file is a Java property file. Each property is described by <em>property name</em>=<em>property value</em>. Lines can be commented with a leading #. The following table describes the supported properties.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. DirX Identity Provisioning Service Agent INI File</caption>
<colgroup>
<col style="width: 19%;">
<col style="width: 34%;">
<col style="width: 47%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Section:</strong></th>
<th class="tableblock halign-left valign-top"><strong>Key:</strong></th>
<th class="tableblock halign-left valign-top"><strong>Description:</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tracing</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">trace.filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the trace file. All messages are written into one file. It is located in the working directory of the workflow activity.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">trace.level</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Trace level values are:</p>
</div>
<div class="paragraph">
<p>0 - no trace, no errors</p>
</div>
<div class="paragraph">
<p>1 - error (is default)</p>
</div>
<div class="paragraph">
<p>2-4: - warnings</p>
</div>
<div class="paragraph">
<p>5-8: - flow trace</p>
</div>
<div class="paragraph">
<p>9: - debug</p>
</div>
<div class="paragraph">
<p>Higher levels include the content of lower levels. This means: if you specify 5, errors and warnings are also written.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">trace.timestamp.format</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When defined, precedes each line in the trace file with a timestamp. For details about the format specification, see below.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Request Properties</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">request</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Activity the agent is to perform:</p>
</div>
<div class="paragraph">
<p><strong>resolution</strong> - the agents evaluates many object types and resolves users and its privileges at the end.</p>
</div>
<div class="paragraph">
<p><strong>userResolution</strong> - the agent evaluates only users and their privileges.</p>
</div>
<div class="paragraph">
<p><strong>checkConsistency</strong> - the agent checks the consistency of the Identity Store (Provisioning Configuration) and performs a privilege resolution at the end.</p>
</div>
<div class="paragraph">
<p><strong>generateReport</strong> - the agent generates a report.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">report.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DN of report configuration object in Identity Store (Provisioning Configuration).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">report.filename</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of report output file (optional), overwrites name in report configuration object, if present.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">report.outputFormat</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Format of report output. Valid options are:</p>
</div>
<div class="paragraph">
<p><strong>XML</strong> - XML format for further processing</p>
</div>
<div class="paragraph">
<p><strong>HTML</strong> - HTML format ready to view with browsers</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">report.sizelimit</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum number of objects a report can retrieve.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Connection properties</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">domainRootDN</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distinguished name of DirX Identity Provisioning domain.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">user.expert.filter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of users to be checked or resolved. This parameter is not relevant for report mode.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bindProfile.hostname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host name of DirX Identity Provisioning Configuration</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bindProfile.isSSL</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SSL switch:</p>
</div>
<div class="paragraph">
<p><strong>false</strong> - do not use SSL to connect to directory server (default)</p>
</div>
<div class="paragraph">
<p><strong>true</strong> - use SSL to connect to directory server</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bindProfile.securePort</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port number (default 636) of DirX Identity Provisioning Configuration for SSL connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bindProfile.port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Port number (default 389) of DirX Identity Provisioning Configuration for non-SSL connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bindProfile.user</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Distinguished name of DirX Identity Provisioning Configuration domain administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bindProfile.pwd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password of DirX Identity Provisioning Configuration domain administrator.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">bindProfile.authenticationType</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Authentication type. Valid options are:</p>
</div>
<div class="paragraph">
<p><strong>SIMPLE</strong> - simple authentication (user and password)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Performance properties</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">batch.accumulator.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of objects (default 500) to be read in advance before role resolution processing continues.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ldap.pagesize</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Page size (default 300) in paged search operations.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cache.update</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Cache update policy:</p>
</div>
<div class="paragraph">
<p><strong>always</strong> - Always update cached entry. The cached entry will be updated every time it is requested.</p>
</div>
<div class="paragraph">
<p><strong>never</strong> - Never update cached entry (default). An entry is read only once.</p>
</div>
<div class="paragraph">
<p><strong>timestamp</strong> Update cached entry if the entry in the directory server is newer.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">cache.mru.size</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of objects (default 10,000) to be cached</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Other Properties</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">suppressChangeEvents</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If set to <strong>true</strong>, no change events are fired for the resolved users.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_time_format_syntax"><a class="anchor" href="#_time_format_syntax"></a>Time Format Syntax</h4>
<div class="paragraph">
<p>To specify the time format use a time pattern string. In this pattern, all ASCII letters are reserved as pattern letters, which are defined as the following:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 10%;">
<col style="width: 30%;">
<col style="width: 30%;">
<col style="width: 30%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Symbol</th>
<th class="tableblock halign-left valign-top">Meaning</th>
<th class="tableblock halign-left valign-top">Presentation</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">era designator</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Text)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">y</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">year</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1996</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">M</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">month in year</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Text &amp; Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">July &amp; 07</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">d</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">day in month</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">h</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hour in am/pm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(1~12)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">H</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hour in day</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(0~23)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">minute in hour</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">30</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">second in minute</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">55</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">S</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">millisecond</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">978</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">E</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">day in week</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Text)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tuesday</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">D</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">day in year</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">189</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">F</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">day of week in month</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 (2nd Wed in July)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">w</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">week in year</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">27</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">W</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">week in month</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Number)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">a</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">am/pm marker</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Text)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">PM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">k</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hour in day</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(1~24)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">24</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">K</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">hour in am/pm</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(0~11)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">z</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">time zone</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Text)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pacific Standard Time</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">'</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">escape for text</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Delimiter)</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">''</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">single quote</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(Literal)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">'</p></td>
</tr>
</tbody>
</table>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>The definition</p>
</div>
<div class="paragraph">
<p><strong>trace.timestamp.format=EEE MMM d HH:mm:ss.SSS yyyy:</strong></p>
</div>
<div class="paragraph">
<p>results in</p>
</div>
<div class="paragraph">
<p>Wed Mar 3 11:30:21.323 2004: &#8230;&#8203; (rest of trace file line)</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_consistency_check_workflow_operation"><a class="anchor" href="#_consistency_check_workflow_operation"></a>Consistency Check Workflow Operation</h4>
<div class="paragraph">
<p>Running the DirX Identity service agent in <strong>consistency</strong> mode consists of these steps:</p>
</div>
<div class="paragraph">
<p><strong>Analyze Privileges toBeDeleted</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches for roles, permissions, and groups in state TBDEL</p>
</li>
<li>
<p>For each privilege in state TBDEL it</p>
</li>
<li>
<p>Removes the incoming assignments to users and / or senior privileges and sets the TBA (to-be-analyzed) flag for the affected objects.</p>
</li>
<li>
<p>Deletes roles / permissions or sets its state to DELETED if history is configured.</p>
</li>
<li>
<p>Sets the state of groups to DELETED.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mark Affected Users</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches the whole user and privilege database.</p>
</li>
<li>
<p>Sets the TBA (to-be-analyzed) flag for all users that have a privilege assigned that is itself flagged with TBA. Considers direct and indirect relationships (indirect relationships go via a role or permission).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze Users and Assignments</strong></p>
</div>
<div class="paragraph">
<p>This module analyzes assignments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches all privilege assignments with relevant start or end dates. The exact filter is:<br>
(&amp;(|(objectClass=dxrUserToRole)(objectClass=dxrUserToGroup)(objectClass=dxrUserToPermission))<br>
(|(dxrEndDate=<strong>)(dxrStartDate=</strong>)))</p>
</li>
<li>
<p>Deletes out-dated start dates, removes assignments with out-dated end dates, and marks this user for privilege resolution.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then it checks the consistency of the whole user database with the filter: (objectClass=dxrUser)</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deletes users in state TBDEL with expired DeleteDate.</p>
</li>
<li>
<p>Sets the DeleteDate for users in state TBDEL that do not yet have a DeleteDate set.</p>
</li>
<li>
<p>Sets as StartDate the current date for users in state NEW that do not yet have a StartDate set.</p>
</li>
<li>
<p>Checks whether the various date fields of the user are consistent with the user state. If not, the user is flagged with TBA for a succeeding privilege resolution.</p>
</li>
<li>
<p>Checks whether the various date fields of the user are consistent, which means the sequence of the date fields must be StartDate, DisableStartDate, DisableEndDate, EndDate, DeleteDate.</p>
</li>
<li>
<p>Checks for broken references of privilege assignments.</p>
</li>
<li>
<p>Checks for correct user state and migrates the old state DELETED to TBDEL.</p>
</li>
<li>
<p>Flags users with TBA if the ErrorExpirationDate is reached. During the next privilege resolution, it stores the assigned groups even if the user is in error.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze the Privilege Structure</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="paragraph">
<p>Analyzes the role structures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Works on all roles within the database (filter: (objectClass=dxrRole)).</p>
</li>
<li>
<p>Checks whether the role is valid, that means it must have a permission or junior role assigned.</p>
</li>
<li>
<p>Checks for broken references to junior roles and assigned permissions.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Analyzes the permission structures:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Works on all permissions within the database (filter: (objectClass=dxrPermission)).</p>
</li>
<li>
<p>Checks whether the permission is valid, that means it must have a group assigned.</p>
</li>
<li>
<p>Checks for broken references to assigned groups.</p>
</li>
<li>
<p>Checks whether the permission is assigned to users if it is not flagged for user assignment.</p>
</li>
<li>
<p>Checks for correct permission parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze Target System Accounts</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Checks whether the <strong>Local Admin</strong> link of a target system is broken.</p>
</li>
<li>
<p>Works on all target system accounts within the database (filter: (objectClass=dxrTargetSystemAccount)).</p>
</li>
<li>
<p>Deletes all accounts that are marked with <strong>Managed in Target System Only</strong> that are in state <strong>Deleted</strong> in the target system.</p>
</li>
<li>
<p>Checks whether the target system of this account is of correct type and exists.</p>
</li>
<li>
<p>Checks for multiple primary accounts for a user.</p>
</li>
<li>
<p>Checks whether the <strong>User Link</strong> of the account is broken.</p>
</li>
<li>
<p>Checks for correct account states.</p>
</li>
<li>
<p>Deletes accounts that are in state DELETED and whose EndDate is expired.</p>
</li>
<li>
<p>Checks that the account is either marked for <strong>Managed in Target System Only</strong> and has no user link assigned or that it is not marked <strong>Managed in Target System Only</strong> and has a user link assigned.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze Target System Groups</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Works on all target system groups within the database (filter: (objectClass=dxrTargetSystemGroup)).</p>
</li>
<li>
<p>Deletes all groups that are marked for <strong>Managed in Target System Only</strong> that are in state <strong>Deleted</strong> in the target system.</p>
</li>
<li>
<p>Checks whether all permission parameter values (dxrRPValues) are consistent with the permission parameter definition at the domain root object.</p>
</li>
<li>
<p>Checks for broken obligation links.</p>
</li>
<li>
<p>Checks for broken group members.</p>
</li>
<li>
<p>Checks whether the groups state has a correct value.</p>
</li>
<li>
<p>Deletes groups in state DELETED or DISABLED with expired EndDate.</p>
</li>
<li>
<p>Updates the distribution list of a virtual group.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze User Changes</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sends a resolve message to the Resolution Adapter for all users that match the expert filter of this consistency run.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_consistency_check_workflow_optimization"><a class="anchor" href="#_consistency_check_workflow_optimization"></a>Consistency Check Workflow Optimization</h4>
<div class="paragraph">
<p>A set of parameters exist that optimize the role resolution in batch mode (as executed in the Service Agent or in the Policy Agent). Read this section carefully and perform the proposed actions. The names in brackets are the parameter names in the agents INI file.</p>
</div>
<div class="paragraph">
<p><strong>Object Accumulator Size (batch.accumulator.size; default=500)</strong></p>
</div>
<div class="paragraph">
<p>This parameter controls the algorithm that calculates the affected users from the privileges to be analyzed. Increasing this parameter reduces the number of LDAP searches but increases the length of the search filters.</p>
</div>
<div class="paragraph">
<p>We recommend keeping the default value as long as the searches are successful. You&#8217;ll need to reduce this parameter if the search for affected users results in an "Unwilling to perform" error returned by the LDAP Server.</p>
</div>
<div class="paragraph">
<p><strong>Object LDAP Page Size (ldap.pagesize; default=50)</strong></p>
</div>
<div class="paragraph">
<p>The effects of the LDAP page size parameter include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Increasing the LDAP page size reduces the number of LDAP searches.</p>
</li>
<li>
<p>The reduction of searches reduces the client-server communication overhead and thus improves performance.</p>
</li>
<li>
<p>Increasing the LDAP page size leads to increased heap space.</p>
</li>
<li>
<p>Furthermore, the time from one paged search to the next increases, since more users must be resolved until the next page is requested. Thus, it is more likely that a paging policy timeout at the LDAP server can occur. This timeout results in a fatal error in the ServiceAgent and processing is stopped.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The optimum LDAP page size depends on the customer&#8217;s data profile (privilege structure, number of accounts/groups assigned to a user, number of target systems). Thus, it should be optimized at the customer&#8217;s site:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check the service agent runtime with LDAP page size of 50, 100, 150, 200, 250, 300.</p>
</li>
<li>
<p>Run the tests with full logging and check the time between subsequent paged user searches.</p>
</li>
<li>
<p>Ensure that the paging policy timeout does not abort the agent run. You may increase the paging policy timeout configured at the server or reduce the LDAP page size if the paging policy timeout is hit.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Object Cache MRU Size (cache.mru.size; default=10000)</strong></p>
</div>
<div class="paragraph">
<p>The objects being read via LDAP are stored in a cache in the storage layer. The Object Cache MRU Size defines the size of the most recently used cache, holding the objects that are not affected by the garbage collector. If the Object Cache MRU Size is too low, the objects are removed by the garbage collector and are restored from LDAP when they are accessed the next time. This slows down the agent considerably.</p>
</div>
<div class="paragraph">
<p>A debug message "gc: recovering properties for <em>dn</em>" is issued in this case.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Periodically run the ServiceAgent with full logging and check for that message. This task must be done from time to time since additional privileges / target systems may require a change in this setting.</p>
</li>
<li>
<p>In case the garbage collector message often occurs, increase the Object Cache MRU Size (cache.mru.size) to a higher value, until the message disappears.</p>
</li>
<li>
<p>An increase of the Object Cache MRU Size may require an increase of the maximum heap space of the Service Agent, since more objects are held in the cache that are not removed by the garbage collector.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Further Optimization</strong></p>
</div>
<div class="paragraph">
<p>In a scenario with a target system holding a small number of groups that keep almost every user as a member (the account memberships are stored with the groups) the XXLGroups flag should be checked at the target system&#8217;s advanced tab.</p>
</div>
<div class="paragraph">
<p>Checking this flag will result in caching all the groups of this target system during role resolution. If you have hundreds of groups in a TS, the XXLGroups flag must not be checked since the initial load of this large number of groups is time- and memory consuming then.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_extract_audit_trail_workflow"><a class="anchor" href="#_extract_audit_trail_workflow"></a>Extract Audit Trail Workflow</h3>
<div class="paragraph">
<p>The Extract Audit Trail workflow checks the Identity Store for audit trail records in the Provisioning view. It writes these records to the audit trail database (a file store) and performs a cleanup of the audit trail records in the Identity Store.</p>
</div>
<div class="paragraph">
<p>You can define the objects to be audited via audit policies. See the section "Managing the Audit Trail" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</div>
<div class="paragraph">
<p>If you work with DirX Audit, you do not need to run this workflow. In this case, the LDAP binding component is used to extract the audit records.</p>
</div>
<div class="paragraph">
<p>Read the following sections to learn more about how to configure the workflow.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Identity Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_extract_audit_trail_workflow"><a class="anchor" href="#_configuring_the_extract_audit_trail_workflow"></a>Configuring the Extract Audit Trail Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Export Properties</strong> tab, you can define the base objects at which to start the search, the subset and the filter. Modify the base object if you want to run several Extract Audit Trail workflows in parallel on different parts of the Identity Store.</p>
</li>
<li>
<p>In the <strong>Import Properties</strong> tab, you can define the file path at which to write the extracted information.*<br>
Note*: It makes sense to place the audit trail database on a separate disk to prevent all other processes from stopping when this disk is full.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, you can define the tracing parameters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, the workflow produces the history audit record format of version 8.0C and earlier. Beginning with 8.0C SP1, an extended history audit format is available. This format is used in conjunction with the DirX Audit product but you can also use it in your custom audit environment. To configure it, perform these steps:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Select the <strong>job object</strong> of your Extract Audit Trail workflow.</p>
</li>
<li>
<p>Select the <strong>Specific Attributes</strong> tab.</p>
</li>
<li>
<p>Click <strong>Edit</strong> and set the parameter name to <strong>transformToPre80CSP0</strong> and the value to <strong>false</strong>.</p>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Now the workflow produces the new audit format.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_full_sod_check_workflow"><a class="anchor" href="#_full_sod_check_workflow"></a>Full SoD Check Workflow</h3>
<div class="paragraph">
<p>This workflow runs the policy execution service. By default, the workflow is configured for the following consistency rule:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>FullSoDCheck</strong> - processes all active SoD policies. For each policy, all users are checked. Found violations result in approval workflow start for all according privileges.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_full_sod_check_workflow"><a class="anchor" href="#_configuring_the_full_sod_check_workflow"></a>Configuring the Full SoD Check Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Rule Search Parameters</strong> tab, you can change the rule to be executed. By default, the standard FullSoDCheck rule is used.</p>
</li>
<li>
<p>In the <strong>User Search Parameters</strong> tab, you can set several parameters to optimize runs. See the section "Policy Agent Optimization" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, the workflow reports errors and warnings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We recommend that you run this workflow once a day to check for SoD violations.</p>
</div>
<div class="paragraph">
<p>Be sure that your user database is prepared for SoD checks. If you are in doubt, run the <strong>MigrateUsersForSoD</strong> rule once.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_initialize_re_approval_workflow"><a class="anchor" href="#_initialize_re_approval_workflow"></a>Initialize Re-approval Workflow</h3>
<div class="paragraph">
<p>This workflow runs the policy execution service. By default, the workflow is configured for the following consistency rule:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>InitializePrivilegeForReapproval</strong> - this rule processes all privileges that require re-approval. Each assignment to such a privilege is initialized for re-approval, which sets their reapproval and end date or period attributes.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_initialize_re_approval_workflow"><a class="anchor" href="#_configuring_the_initialize_re_approval_workflow"></a>Configuring the Initialize Re-approval Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Rule Search Parameters</strong> tab, you can change the rule to be executed. By default, the standard InitializeReapproval rule is used.</p>
</li>
<li>
<p>In the <strong>User Search Parameters</strong> tab, you can set several parameters to optimize runs. See the section "Policy Agent Optimization" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, the workflow reports errors and warnings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We recommend that you run this workflow once a day to initialize re-approval. After running this workflow, you should run the Start Reapproval Workflow.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_password_expiration_notification_workflow"><a class="anchor" href="#_password_expiration_notification_workflow"></a>Password Expiration Notification Workflow</h3>
<div class="paragraph">
<p>The Password Expiration Notification workflow checks user entries for passwords that are about to expire and sends a notification (e-mail) to the affected users. The workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Sends a configurable number of notifications (the time between the notifications depends on the schedule frequency).</p>
</li>
<li>
<p>Allows you to define e-mail format.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_password_expiration_notification_workflow"><a class="anchor" href="#_configuring_the_password_expiration_notification_workflow"></a>Configuring the Password Expiration Notification Workflow</h4>
<div class="paragraph">
<p>To complete the configuration for this workflow, you must adapt some values in the DirX Identity Connectivity configuration to your environment. Use the configuration wizard in the Identity Manager global view as follows:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Double-click the connected directory icon <strong>Mail Server</strong>.</p>
</li>
<li>
<p>In the wizard window, click the icon to the right of the <strong>Service</strong> field.</p>
</li>
<li>
<p>Change the <strong>IP Address</strong> and <strong>Port</strong> fields to define the mail server.</p>
</li>
<li>
<p>Click <strong>OK</strong>.</p>
</li>
<li>
<p>In the wizard window, click <strong>Bind Profiles</strong>.</p>
</li>
<li>
<p>In <strong>Bind</strong> <strong>Profiles</strong>, click <strong>Admin</strong>, and then click the button on the right to open the property window for this entry.</p>
</li>
<li>
<p>Set the <strong>User</strong> and <strong>Password</strong> fields if your mail server requires authentication.</p>
</li>
<li>
<p>Click <strong>OK</strong> and then click <strong>Finish</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also set the notification parameters of the workflow:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Right-click the workflow line between the connected directory icons <strong>Identity</strong> <strong>Store</strong> and <strong>Mail Server</strong>.</p>
</li>
<li>
<p>In the pop-up menu, select the workflow <strong>PwExpirationNotification</strong> and then click <strong>Configure</strong>.</p>
</li>
<li>
<p>Click <strong>MailConfiguration</strong> and/or <strong>MailContent</strong>.</p>
</li>
<li>
<p>Adjust the values as required.</p>
</li>
<li>
<p>Click <strong>Finish</strong> to close the wizard and save your changes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At last you must go to the Mail Server Connected Directory in the <strong>Expert View</strong> and either set the specific attribute <strong>mapmailaddress</strong> to a valid administrator mail address if you want that all mails about expired passwords are sent to that administrator or delete the preconfigured value “dummy” if you want the mails to be sent to each user’s mail address specified in the “to” field of the <strong>Mail Configuration</strong> tab of the <strong>PwExpirationNotification</strong> job.</p>
</div>
<div class="paragraph">
<p>Now the workflow should run.</p>
</div>
</div>
<div class="sect3">
<h4 id="_password_expiration_notification_workflow_operation"><a class="anchor" href="#_password_expiration_notification_workflow_operation"></a>Password Expiration Notification Workflow Operation</h4>
<div class="paragraph">
<p>You can assign to each user a password policy. The password policy is assigned via the password policy link (attribute <strong>dxrPwdPolicyLink</strong>). If no password policy is assigned, the default password policy is used. The expiration calculation depends on the following attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>dxrPwdMaxAge</strong> (Maximum age) - at the password policy. It defines the maximum allowed age of the password.</p>
</li>
<li>
<p><strong>dxrPwdExpireWarning</strong> (Expiration Warning Time) - at the password policy. The time to warn before the password expires.</p>
</li>
<li>
<p><strong>dxrPwdChangedTime</strong> (Password Changed Time) - at the user entry. The last time the password was changed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the current date is greater than (<strong>dxrPwdChangedTime+dxrPwdMaxAge-dxrPwdExpireWarning</strong>), the workflow generates a warning e-mail.</p>
</div>
<div class="paragraph">
<p>After sending the warning, the <strong>dxrPwdExpiryNotified</strong> (Password Expiration Notified) attribute of the user entry is incremented. If the configured <strong>Number of Notifications</strong> is reached no more warnings are sent on subsequent workflow runs.</p>
</div>
<div class="paragraph">
<p>If the user changes the password or an administrator resets the password with Web Center the <strong>dxrPwdExpiryNotified</strong> attribute is reset to <strong>0</strong> again.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_policy_execution_workflow"><a class="anchor" href="#_policy_execution_workflow"></a>Policy Execution Workflow</h3>
<div class="paragraph">
<p>This workflow runs the policy execution service to assign and remove privileges automatically. By default, the workflow is configured for the following provisioning rules:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>cn=Role based scenario,cn=Rules,cn=Policies,cn=My-Company</strong> - the workflow executes all provisioning rules under this specified node.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_policy_execution_workflow"><a class="anchor" href="#_configuring_the_policy_execution_workflow"></a>Configuring the Policy Execution Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Policy Agent Parameters</strong> tab, you can define whether the workflow runs in simulation mode (<strong>Simulate rules</strong>) or in real mode (<strong>Process rules</strong>). In simulation mode it only logs information and makes no changes in the Identity Store.<br>
<br>
Additionally you can define if, after an assignment, the user should be immediately resolved (<strong>Assign Privilege and Resolve</strong>). You should use this feature only when your Provisioning domain uses simple privilege structures and has a small Identity Store. The service assigns a privilege to a user and then resolves the user. Assignment of several privileges to the same user results in multiple resolutions of this user, which can result in low performance. To optimize performance, you can build a nested workflow that consists of a policy execution step and a privilege resolution step.<br></p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If SoD is enabled at the domain object, the option <strong>Assign Privilege and Resolve</strong> is enforced because SoD works hierarchically and therefore a resolution is always necessary. If possible assign several privileges with one rule instead of assigning each privilege with a separate rule. The result is a faster running policy engine process.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If <strong>Suppress Change Events</strong> is set to true no “User Change Events” are initiated.</p>
</div>
</li>
<li>
<p>In the <strong>Rule Search Parameters</strong> tab, you can select the set of rules to be executed.</p>
</li>
<li>
<p>In the <strong>User Search Parameters</strong> tab, you can set several parameters to optimize runs. See the section "Policy Agent Optimization" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, the workflow reports errors and warnings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We recommend that you run this workflow once a day to check for SoD violations.</p>
</div>
</div>
<div class="sect3">
<h4 id="_policy_execution_workflow_optimization"><a class="anchor" href="#_policy_execution_workflow_optimization"></a>Policy Execution Workflow Optimization</h4>
<div class="paragraph">
<p>For optimization or in case of specific errors read the section "Consistency Check Workflow Optimization".</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_privilege_resolution_workflow"><a class="anchor" href="#_privilege_resolution_workflow"></a>Privilege Resolution Workflow</h3>
<div class="paragraph">
<p>The Privilege Resolution workflow runs the service agent in <strong>resolution</strong> mode. The next sections describe:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>how to configure the workflow</p>
</li>
<li>
<p>how the workflow operates</p>
</li>
<li>
<p>how to optimize the workflow</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_privilege_resolution_workflow"><a class="anchor" href="#_configuring_the_privilege_resolution_workflow"></a>Configuring the Privilege Resolution Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Privilege Resolution Parameters</strong> tab, set the <strong>Subject Filter</strong>. This setting allows you to define the number of users the service agent is to check. The default filter checks all users that are flagged with the <strong>dxrTBA</strong> flag (this flag indicates that the entry is "to be analyzed").</p>
</li>
<li>
<p>In the <strong>Provisioning Resolution Limits</strong> tab, you can set several parameters that you can use to optimize runs. See the section "Service Agent Configuration File" for a detailed explanation.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, only errors are reported.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a detailed description of the privilege resolution procedure, see the section "Privilege Resolution Workflow Operation".</p>
</div>
<div class="paragraph">
<p>The complete list of INI file parameters is shown in the section "Service Agent Configuration File".</p>
</div>
</div>
<div class="sect3">
<h4 id="_privilege_resolution_workflow_operation"><a class="anchor" href="#_privilege_resolution_workflow_operation"></a>Privilege Resolution Workflow Operation</h4>
<div class="paragraph">
<p>How privilege resolution works regarding accounts and account-group-memberships and its related states is described in detail in the chapter "Managing Provisioning &#8594; Managing States &#8594; How Privilege Resolution Works" <em>DirX Identity Provisioning Administration Guide</em>.</p>
</div>
<div class="paragraph">
<p>Running the DirX Identity service agent in <strong>user</strong> <strong>resolution</strong> mode consists of these steps:</p>
</div>
<div class="paragraph">
<p><strong>Analyze User Changes</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Executes a privilege resolution on all users that match the expert filter of this run.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Running the DirX Identity service agent in <strong>resolution</strong> mode consists of these steps:</p>
</div>
<div class="paragraph">
<p><strong>Analyze Privileges toBeDeleted</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches for roles, permissions, and groups in state TBDEL.</p>
</li>
<li>
<p>For each privilege in state TBDEL it</p>
</li>
<li>
<p>Removes the incoming assignments to users and / or senior privileges and sets the TBA (to-be-analyzed) flag for the affected objects.</p>
</li>
<li>
<p>Deletes roles / permissions or sets it state to DELETED if history is configured.</p>
</li>
<li>
<p>Sets the state of groups to DELETED.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Mark Affected Users</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches the whole user and privilege database.</p>
</li>
<li>
<p>Sets the TBA (to-be-analyzed) flag for all users that have a privilege assigned that is itself flagged with TBA. Considers direct and indirect relationships (indirect relationships go via an assignment object).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze Users and Assignments</strong></p>
</div>
<div class="paragraph">
<p>This module analyzes assignments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Searches all privilege assignments with relevant start or end dates. The exact filter is:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ldap hljs" data-lang="ldap">(&amp;(|(objectClass=dxrUserToRole)(objectClass=dxrUserToGroup)(objectClass=dxrUserToPermission))(|(dxrEndDate&lt;=today)(dxrStartDate&lt;=today)))</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <em>today</em> is replaced with the current date</p>
</div>
</li>
<li>
<p>Deletes the start date or privilege assignment and marks this user for privilege resolution.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Then it searches for users that must undergo a state transition:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Is searches for all users with inconsistent state and dates and flags these users with TBA. The exact filter is:<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-ldap hljs" data-lang="ldap">(&amp;(objectClass=dxrUser)(|(&amp;(dxrEndDate&lt;=today)(|(dxrState=ENABLED)(dxrState=DISABLED)))(&amp;(dxrStartDate&lt;=today)(dxrState=NEW))(&amp;(dxrDisableEndDate&lt;=today)(dxrState=DISABLED))(&amp;(dxrDisableStartDate&lt;=today)(dxrState=ENABLED))(dxrDeleteDate&lt;=today)(&amp;(dxrState=TBDEL)(!(dxrEndDate&lt;=today)))))</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze Target System Accounts</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deletes accounts that are in state DELETED and whose EndDate is expired.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze Target System Groups</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deletes groups in state DELETED or DISABLED with expired EndDate.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Analyze User Changes</strong></p>
</div>
<div class="paragraph">
<p>This module:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Executes a privilege resolution on all users that match the expert filter of this run.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_privilege_resolution_workflow_optimization"><a class="anchor" href="#_privilege_resolution_workflow_optimization"></a>Privilege Resolution Workflow Optimization</h4>
<div class="paragraph">
<p>For optimization or in case of specific errors read the section "Consistency Check Workflow Optimization".</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_workflow_externally_workflow"><a class="anchor" href="#_run_workflow_externally_workflow"></a>Run Workflow Externally Workflow</h3>
<div class="paragraph">
<p>Use the Run Workflow Externally workflow to start Tcl-based workflows in another Connectivity domain. This workflow allows you to control processes between independent DirX Identity Connectivity domains.</p>
</div>
<div class="paragraph">
<p><strong>Note:</strong> This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.</p>
</div>
<div class="sect3">
<h4 id="_configuring_the_run_workflow_externally_workflow"><a class="anchor" href="#_configuring_the_run_workflow_externally_workflow"></a>Configuring the Run Workflow Externally Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu).</p>
</div>
<div class="paragraph">
<p>In the <strong>runWf</strong> tab, define the following parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>WorkflowName</strong> - defines the path of the workflow definition. For example, "Default/Source Scheduled/LDIFfile/LDIFfile2Ident" starts the LDIFfile2Ident workflow.</p>
</li>
<li>
<p><strong>Instantiator</strong> - defines the name of the foreign domain (or any other meaningful name) that is later visible in the status entry.</p>
</li>
<li>
<p><strong>MessageServer</strong> - selects your type of message server.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In the <strong>Tracing</strong> tab, you can change the tracing parameters.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_start_re_approval_workflow"><a class="anchor" href="#_start_re_approval_workflow"></a>Start Re-approval Workflow</h3>
<div class="paragraph">
<p>This workflow runs the policy execution service. By default, the workflow is configured for the following consistency rule:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>StartWorkflowsForReapproval</strong> - this rule starts the request workflow that has been configured for the privilege that requires re-approval.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_start_reapproval_workflow"><a class="anchor" href="#_configuring_the_start_reapproval_workflow"></a>Configuring the Start Reapproval Workflow</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Rule Search Parameters</strong> tab, you can change the rule to be executed. By default, the standard StartWorkflowsForReapproval rule is used.</p>
</li>
<li>
<p>In the <strong>User Search Parameters</strong> tab, you can set several parameters to optimize runs. See the section "Policy Agent Optimization" in the <em>DirX Identity Provisioning Administration Guide</em>.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, the workflow reports errors and warnings.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We recommend that you run this workflow once a day to run all necessary re-approval workflows. Before running this workflow, you should run the Initialize Reapproval Workflow.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_status_report_generation_workflow"><a class="anchor" href="#_status_report_generation_workflow"></a>Status Report Generation Workflow</h3>
<div class="paragraph">
<p>This workflow allows you to run reports by hand or automatically. DirX Identity provides a pre-configured status report workflow for both the Provisioning and the Connectivity views:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>ReportGeneration</strong> - this workflow is an example of a Provisioning status report that works on the users tree. The Status Report Generation workflow for the <strong>Provisioning view</strong> runs the service agent in the <strong>generateReports</strong> mode.</p>
</li>
<li>
<p><strong>Ident2Report</strong> - this workflow is an example of a Connectivity configuration status report. The Status Report Generation workflow for the <strong>Connectivity view</strong> runs a special report agent.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The next sections describe how to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Configure the workflow for the Provisioning view</p>
</li>
<li>
<p>Configure the workflow for the Connectivity view</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
This workflow runs in the C++-based Server but does not run in conjunction with the meta controller and thus does not use Tcl code.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_configuring_the_status_report_generation_workflow_for_the_provisioning_view"><a class="anchor" href="#_configuring_the_status_report_generation_workflow_for_the_provisioning_view"></a>Configuring the Status Report Generation Workflow for the Provisioning View</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Report Parameters</strong> tab, you can set the report definition path, the output format and the size limit. See the section "Service Agent Configuration File" for a detailed explanation.</p>
</li>
<li>
<p>In the <strong>Report Output File Properties</strong> tab, set the file name to which the report is to be written.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, only errors are reported.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a detailed description of the privilege resolution procedure, see the section "Privilege Resolution Workflow Operation".</p>
</div>
<div class="paragraph">
<p>The complete list of INI file parameters is shown in the Consistency Check Workflow section. See the section "Service Agent Configuration File".</p>
</div>
</div>
<div class="sect3">
<h4 id="_configuring_the_status_report_generation_workflow_for_the_connectivity_view"><a class="anchor" href="#_configuring_the_status_report_generation_workflow_for_the_connectivity_view"></a>Configuring the Status Report Generation Workflow for the Connectivity View</h4>
<div class="paragraph">
<p>To configure this workflow, run the workflow configuration wizard (option <strong>Configure</strong> in the context menu):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <strong>Report Properties</strong> tab, you can set the search base, the report name and the output format.</p>
</li>
<li>
<p>In the <strong>Tracing</strong> tab, set the tracing parameters. By default, no trace is performed.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script id="site-script" src="../../../_/js/site.js" data-ui-root-path="../../../_"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
  </body>
</html>
